if(typeof QNR=="undefined"){var QNR={};}QNR.event=$("<div></div>");$(function(){QNR.serviceIm.load();});(function(){var Common={};Common.trim=function(s){return s.replace(/(^\s*)|(\s*$)/g,"");};var validator={errinput:"errinput",errmsg:"errmsg",errcls:"no",l1:/^.{1,}$/,realname:/^[\w\u0391-\uFFE5\s]{2,}$/,yescls:"yes",errorTip:"errorTip",errorInput:"errorInput",validTip:"validTip",require:/[^(^\s*)|(\s*$)]/,email:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,domain:/^\w+([-.]\w+)*\.\w+([-.]\w+)*$/,phone:/^((\(\d{2,3}\))|(\d{3}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(\-\d{1,4})?$/,mobile:/^1[345]\d{9}$|^18\d{9}$|^0\d{9,10}$/,url:/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,idcard:"this.isIdCard(value)",money:/^\d+(\.\d+)?$/,number:/^\d+$/,zip:/^\d{6}$/,ip:/^[\d\.]{7,15}$/,qq:/^[1-9]\d{4,9}$/,integer:/^[-\+]?\d+$/,"double":/^[-\+]?\d+(\.\d+)?$/,english:/^[A-Za-z]+$/,chinese:/^[\u0391-\uFFE5]+$/,enandcn:/^[\w\u0391-\uFFE5][\w\u0391-\uFFE5\-\.]+$/,username:/^[\w]+[\-\.\w]{2,}$/i,unsafe:/[<>\?\#\$\*\&;\\\/\[\]\{\}=\(\)\.\^%,]/,safestring:"this.isSafe(value)",filter:"this.doFilter(value)",limit:"this.checkLimit(value.length)",limitb:"this.checkLimit(this.LenB(value))",limitc:"this.checkLimit(value.length)",date:"this.isDate(value)",repeat:"this.checkRepeat(value)",range:"this.checkRange(value)",compare:"this.checkCompare(value)",custom:"this.Exec(value)",group:"this.mustChecked()",ajax:"this.doajax(errindex)",isIdCard:function(number){var date,Ai;var verify="10x98765432";var Wi=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];var area=["","","","","","","","","","","","北京","天津","河北","山西","内蒙古","","","","","","辽宁","吉林","黑龙江","","","","","","","","上海","江苏","浙江","安微","福建","江西","山东","","","","河南","湖北","湖南","广东","广西","海南","","","","重庆","四川","贵州","云南","西藏","","","","","","","陕西","甘肃","青海","宁夏","新疆","","","","","","台湾","","","","","","","","","","香港","澳门","","","","","","","","","国外"];var re=number.match(/^(\d{2})\d{4}(((\d{2})(\d{2})(\d{2})(\d{3}))|((\d{4})(\d{2})(\d{2})(\d{3}[x\d])))$/i);if(re==null){return false;}if(re[1]>=area.length||area[re[1]]==""){return false;}if(re[2].length==12){Ai=number.substr(0,17);date=[re[9],re[10],re[11]].join("-");}else{Ai=number.substr(0,6)+"19"+number.substr(6);date=["19"+re[4],re[5],re[6]].join("-");}if(!this.isDate(date,"ymd")){return false;}var sum=0;for(var i=0;i<=16;i++){sum+=Ai.charAt(i)*Wi[i];}Ai+=verify.charAt(sum%11);return(number.length==15||number.length==18&&number==Ai);},isSafe:function(str){return !this.unsafe.test(str);},isDate:function(op){var formatString=this["element"].attr("format");formatString=formatString||"ymd";var m,year,month,day;switch(formatString){case"ymd":m=op.match(new RegExp("^((\\d{4})|(\\d{2}))([-./])(\\d{1,2})\\4(\\d{1,2})$"));if(m==null){return false;}day=m[6];month=m[5]*1;year=(m[2].length==4)?m[2]:GetFullYear(parseInt(m[3],10));break;case"dmy":m=op.match(new RegExp("^(\\d{1,2})([-./])(\\d{1,2})\\2((\\d{4})|(\\d{2}))$"));if(m==null){return false;}day=m[1];month=m[3]*1;year=(m[5].length==4)?m[5]:GetFullYear(parseInt(m[6],10));break;default:break;}if(!parseInt(month)){return false;}month=month==0?12:month;var date=new Date(year,month-1,day);return(typeof(date)=="object"&&year==date.getFullYear()&&month==(date.getMonth()+1)&&day==date.getDate());function GetFullYear(y){return((y<30?"20":"19")+y)|0;}},doFilter:function(value){var filter=this["element"].attr("accept");return new RegExp("^.+.(?=EXT)(EXT)$".replace(/EXT/g,filter.split(/\s*,\s*/).join("|")),"gi").test(value);},checkLimit:function(len){var minval=this["element"].attr("min")||Number.MIN_VALUE;var maxval=this["element"].attr("max")||Number.MAX_VALUE;return(minval<=len&&len<=maxval);},LenB:function(str){return str.replace(/[^\x00-\xff]/g,"**").length;},checkRepeat:function(value){var to=this["element"].attr("to");return value==jQuery('input[name="'+to+'"]').eq(0).val();},checkRange:function(value){value=value|0;var minval=this["element"].attr("min")||Number.MIN_VALUE;var maxval=this["element"].attr("max")||Number.MAX_VALUE;return(minval<=value&&value<=maxval);},checkCompare:function(value){var compareid=this["element"].attr("compare");if(!value){return false;}return jQuery("#"+compareid).attr("value")==value;},Exec:function(value){var reg=this["element"].attr("regexp");return new RegExp(reg,"gi").test(value);},mustChecked:function(){var tagName=this["element"].attr("name");var f=this["element"].parents("form");var n=f.find('input[name="'+tagName+'"][checked]').length;var count=f.find('input[name="'+tagName+'"]').length;var minval=this["element"].attr("min")||1;var maxval=this["element"].attr("max")||count;return(minval<=n&&n<=maxval);},doajax:function(value){var element=this["element"];var errindex=this["errindex"];var url=this["element"].attr("url");var vname=this["element"].attr("vname");var msgid=jQuery("#"+element.attr("msgid"));var val=this["element"].val();var str_errmsg=this["element"].attr("msg");var arr_errmsg;var errmsg;if(str_errmsg.indexOf("|")>-1){arr_errmsg=str_errmsg.split("|");errmsg=arr_errmsg[errindex];}else{errmsg="";}var type=this["element"].attr("type");var Charset=jQuery.browser.msie?document.charset:document.characterSet;var methodtype=(Charset.toLowerCase()=="utf-8")?"post":"get";var method=this["element"].attr("method")||methodtype;var name=this["element"].attr("name");if(url==""||url==undefined){alert("Please specify url");return false;}else{if(vname==""||vname==undefined){alert("Please specify vname");return false;}}if(url.indexOf("?")>-1){url=url+"&n="+vname+"&v="+escape(val);}else{url=url+"?n="+vname+"&v="+escape(val);}var s=$.ajax({type:method,url:url,data:{},cache:false,async:false,success:function(data){data=data.replace(/(^\s*)|(\s*$)/g,"");data=eval("("+data+")");if(data.error!=0){errmsg=errmsg==""?data.data:errmsg;(type!="checkbox"&&type!="radio"&&element.addClass(validator.errorInput));if(!errmsg){return false;}if(msgid.length>0){msgid.removeClass(validator.validTip).addClass(validator.errorTip).html(errmsg);}else{jQuery("<span class='"+validator.errorTip+"'></span>").html(errmsg).insertAfter(element);}return false;}else{if(data.error==0){if(!errmsg){return true;}if(msgid.length>0){msgid.removeClass(validator.errorTip).addClass(validator.validTip).html("");}else{jQuery("<span class='"+validator.validTip+"'></span>").insertAfter(element);}return true;}}}}).responseText;return(eval("("+s.replace(/(^\s*)|(\s*$)/g,"")+")").error==0);}};validator.showErr=function(element,errindex){var str_errmsg=element.attr("msg")||"";var arr_errmsg=str_errmsg.split("|");var errmsg=arr_errmsg[errindex]?arr_errmsg[errindex]:arr_errmsg[0];var msgid=jQuery("#"+element.attr("msgid"));var type=element.attr("type");(type!="checkbox"&&type!="radio"&&element.addClass(this["errorinput"]));if(!errmsg){return false;}if(msgid.length>0){msgid.removeClass(this["validTip"]).addClass(this["errorTip"]).html(errmsg);}else{element.parent("*").find("."+this["errorTip"]).remove();jQuery("<span class='"+this["errorTip"]+"'></span>").html(errmsg).insertAfter(element);}return false;};validator.removeErr=function(element){element.removeClass(this["errorInput"]);var msgid=jQuery("#"+element.attr("msgid"));if(msgid.length==0){element.parent("*").find("span ."+this["errorTip"]).remove();element.parent("*").find("span ."+this["validTip"]).remove();}};validator.checkajax=function(element,datatype,errindex){var value=jQuery.trim(element.val());this["element"]=element;this["errindex"]=errindex;validator.removeErr(element);return eval(this[datatype]);};validator.checkDatatype=function(element,datatype){var value=jQuery.trim(element.val());this["element"]=element;validator.removeErr(element);switch(datatype){case"idcard":case"date":case"repeat":case"range":case"compare":case"custom":case"group":case"limit":case"limitb":case"limitc":case"safestring":case"filter":return eval(this[datatype]);break;default:return this[datatype].test(value);break;}};validator.check=function(obj,submit){var datatype=obj.attr("datatype");var lastvalue=obj.attr("lastvalue");var value=jQuery.trim(obj.val());if(typeof(datatype)=="undefined"){return true;}if(obj.attr("require")!="true"&&value==""){obj.removeClass(validator.errorInput);return true;}var isValid=true;var datatypes=datatype.split("|");if(($.inArray("repeat",datatypes)==-1)&&($.inArray("ajax",datatypes)!=-1)&&(submit==true||(lastvalue&&lastvalue==value))){var e=obj.parent("*").find("."+validator.errorTip);var v=obj.parent("*").find("."+validator.validTip);if(e.length>0||v.length>0){return(v.length>0);}}jQuery.each(datatypes,function(index,type){if(typeof(validator[type])=="undefined"){isValid=false;return false;}if(type=="ajax"){return isValid=validator.checkajax(obj,type,index);}if(validator.checkDatatype(obj,type)==false){obj.addClass(validator.errorInput);validator.showErr(obj,index);return isValid=false;}else{validator.showErr(obj,index);obj.removeClass(validator.errorInput);var msgid=jQuery("#"+obj.attr("msgid"));if(msgid.length>0){msgid.removeClass(validator.errorTip).addClass(validator.validTip).html("");}else{obj.parent("*").find("."+validator.errorTip+",."+validator.validTip).remove();}}});obj.attr("lastvalue",value);return isValid;};jQuery.fn.validateForm=function(no,form){var isValid=true;var errIndex=new Array();var n=0;var emsg="";var elements=jQuery(form).find(":input[require]");elements.each(function(i){if(false==validator.check(jQuery(this),true)){var m=jQuery(this).parent("*").find("."+validator.errorTip).html();if(m){emsg+=(emsg=="")?m:"\n"+m;}isValid=false;errIndex[n++]=i;}});if(isValid==false){elements.eq(errIndex[0]).focus().select();return false;}var settings_password=jQuery(form).find(":input[settings_password]");if(settings_password.length){var is_new=settings_password.attr("is_new");if(is_new=="no"&&($.trim(settings_password.val())==0)){return true;}if(is_new=="yes"){if(!(X.password())){settings_password.addClass("errorInput");return false;}else{return true;}}}return true;};jQuery.fn.checkForm=function(jform){var jform=jQuery(jform);var elements=jform.find(":input[require]");elements.blur(function(){return validator.check(jQuery(this));});jform.submit(function(){return jQuery.fn.validateForm("",jform);});};}(jQuery));jQuery.fn.extend({everyTime:function(a,b,c,d){return this.each(function(){jQuery.timer.add(this,a,b,c,d);});},oneTime:function(a,b,c){return this.each(function(){jQuery.timer.add(this,a,b,c,1);});},stopTime:function(a,b){return this.each(function(){jQuery.timer.remove(this,a,b);});}});jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1000,das:10000,hs:100000,ks:1000000},timeParse:function(c){if(c==undefined||c==null){return null;}var a=this.regex.exec(jQuery.trim(c.toString()));if(a[2]){var b=parseFloat(a[1]);var d=this.powers[a[2]]||1;return b*d;}else{return c;}},add:function(d,b,c,f,h){var a=0;if(jQuery.isFunction(c)){if(!h){h=f;}f=c;c=b;}b=jQuery.timer.timeParse(b);if(typeof b!="number"||isNaN(b)||b<0){return;}if(typeof h!="number"||isNaN(h)||h<0){h=0;}h=h||0;var g=jQuery.data(d,this.dataKey)||jQuery.data(d,this.dataKey,{});if(!g[c]){g[c]={};}f.timerID=f.timerID||this.guid++;var e=function(){if((++a>h&&h!==0)||f.call(d,a)===false){jQuery.timer.remove(d,c,f);}};e.timerID=f.timerID;if(!g[c][f.timerID]){g[c][f.timerID]=window.setInterval(e,b);}this.global.push(d);},remove:function(c,b,d){var e=jQuery.data(c,this.dataKey),a;if(e){if(!b){for(b in e){this.remove(c,b,d);}}else{if(e[b]){if(d){if(d.timerID){window.clearInterval(e[b][d.timerID]);delete e[b][d.timerID];}}else{for(var d in e[b]){window.clearInterval(e[b][d]);delete e[b][d];}}for(a in e[b]){break;}if(!a){a=null;delete e[b];}}}for(a in e){break;}if(!a){jQuery.removeData(c,this.dataKey);}}}}});jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(a,b){jQuery.timer.remove(b);});});
/*
 * jQuery Form Plugin
 * version: 2.73 (03-MAY-2011)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
(function(b){b.fn.ajaxSubmit=function(t){if(!this.length){a("ajaxSubmit: skipping submit process - no element selected");return this;}if(typeof t=="function"){t={success:t};}var h=this.attr("action");var d=(typeof h==="string")?b.trim(h):"";if(d){d=(d.match(/^([^#]+)/)||[])[1];}d=d||window.location.href||"";t=b.extend(true,{url:d,success:b.ajaxSettings.success,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var u={};this.trigger("form-pre-serialize",[this,t,u]);if(u.veto){a("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this;}if(t.beforeSerialize&&t.beforeSerialize(this,t)===false){a("ajaxSubmit: submit aborted via beforeSerialize callback");return this;}var f,p,m=this.formToArray(t.semantic);if(t.data){t.extraData=t.data;for(f in t.data){if(t.data[f] instanceof Array){for(var i in t.data[f]){m.push({name:f,value:t.data[f][i]});}}else{p=t.data[f];p=b.isFunction(p)?p():p;m.push({name:f,value:p});}}}if(t.beforeSubmit&&t.beforeSubmit(m,this,t)===false){a("ajaxSubmit: submit aborted via beforeSubmit callback");return this;}this.trigger("form-submit-validate",[m,this,t,u]);if(u.veto){a("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this;}var c=b.param(m);if(t.type.toUpperCase()=="GET"){t.url+=(t.url.indexOf("?")>=0?"&":"?")+c;t.data=null;}else{t.data=c;}var s=this,l=[];if(t.resetForm){l.push(function(){s.resetForm();});}if(t.clearForm){l.push(function(){s.clearForm();});}if(!t.dataType&&t.target){var r=t.success||function(){};l.push(function(n){var k=t.replaceTarget?"replaceWith":"html";b(t.target)[k](n).each(r,arguments);});}else{if(t.success){l.push(t.success);}}t.success=function(w,n,x){var v=t.context||t;for(var q=0,k=l.length;q<k;q++){l[q].apply(v,[w,n,x||s,s]);}};var g=b("input:file",this).length>0;var e="multipart/form-data";var j=(s.attr("enctype")==e||s.attr("encoding")==e);if(t.iframe!==false&&(g||t.iframe||j)){if(t.closeKeepAlive){b.get(t.closeKeepAlive,o);}else{o();}}else{b.ajax(t);}this.trigger("form-submit-notify",[this,t]);return this;function o(){var v=s[0];if(b(":input[name=submit],:input[id=submit]",v).length){alert('Error: Form elements must not have name or id of "submit".');return;}var D=b.extend(true,{},b.ajaxSettings,t);D.context=D.context||D;var G="jqFormIO"+(new Date().getTime()),A="_"+G;var x=b('<iframe id="'+G+'" name="'+G+'" src="'+D.iframeSrc+'" />');var B=x[0];x.css({position:"absolute",top:"-1000px",left:"-1000px"});var y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(n){var O=(n==="timeout"?"timeout":"aborted");a("aborting upload... "+O);this.aborted=1;x.attr("src",D.iframeSrc);y.error=O;D.error&&D.error.call(D.context,y,O,O);K&&b.event.trigger("ajaxError",[y,D,O]);D.complete&&D.complete.call(D.context,y,O);}};var K=D.global;if(K&&!b.active++){b.event.trigger("ajaxStart");}if(K){b.event.trigger("ajaxSend",[y,D]);}if(D.beforeSend&&D.beforeSend.call(D.context,y,D)===false){if(D.global){b.active--;}return;}if(y.aborted){return;}var J=0,C;var z=v.clk;if(z){var H=z.name;if(H&&!z.disabled){D.extraData=D.extraData||{};D.extraData[H]=z.value;if(z.type=="image"){D.extraData[H+".x"]=v.clk_x;D.extraData[H+".y"]=v.clk_y;}}}function I(){var Q=s.attr("target"),O=s.attr("action");v.setAttribute("target",G);if(v.getAttribute("method")!="POST"){v.setAttribute("method","POST");}if(v.getAttribute("action")!=D.url){v.setAttribute("action",D.url);}if(!D.skipEncodingOverride){s.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});}if(D.timeout){C=setTimeout(function(){J=true;F(true);},D.timeout);}var P=[];try{if(D.extraData){for(var R in D.extraData){P.push(b('<input type="hidden" name="'+R+'" value="'+D.extraData[R]+'" />').appendTo(v)[0]);}}x.appendTo("body");B.attachEvent?B.attachEvent("onload",F):B.addEventListener("load",F,false);v.submit();}finally{v.setAttribute("action",O);if(Q){v.setAttribute("target",Q);}else{s.removeAttr("target");}b(P).remove();}}if(D.forceSync){I();}else{setTimeout(I,10);}var M,N,L=50,w;function F(T){if(y.aborted||w){return;}if(T===true&&y){y.abort("timeout");return;}var S=B.contentWindow?B.contentWindow.document:B.contentDocument?B.contentDocument:B.document;if(!S||S.location.href==D.iframeSrc){if(!J){return;}}B.detachEvent?B.detachEvent("onload",F):B.removeEventListener("load",F,false);var P=true;try{if(J){throw"timeout";}var U=D.dataType=="xml"||S.XMLDocument||b.isXMLDoc(S);a("isXml="+U);if(!U&&window.opera&&(S.body==null||S.body.innerHTML=="")){if(--L){a("requeing onLoad callback, DOM not available");setTimeout(F,250);return;}}y.responseText=S.body?S.body.innerHTML:S.documentElement?S.documentElement.innerHTML:null;y.responseXML=S.XMLDocument?S.XMLDocument:S;if(U){D.dataType="xml";}y.getResponseHeader=function(W){var V={"content-type":D.dataType};return V[W];};var R=/(json|script|text)/.test(D.dataType);if(R||D.textarea){var O=S.getElementsByTagName("textarea")[0];if(O){y.responseText=O.value;}else{if(R){var Q=S.getElementsByTagName("pre")[0];var n=S.getElementsByTagName("body")[0];if(Q){y.responseText=Q.textContent;}else{if(n){y.responseText=n.innerHTML;}}}}}else{if(D.dataType=="xml"&&!y.responseXML&&y.responseText!=null){y.responseXML=E(y.responseText);}}M=k(y,D.dataType,D);}catch(T){a("error caught:",T);P=false;y.error=T;D.error&&D.error.call(D.context,y,"error",T);K&&b.event.trigger("ajaxError",[y,D,T]);}if(y.aborted){a("upload aborted");P=false;}if(P){D.success&&D.success.call(D.context,M,"success",y);K&&b.event.trigger("ajaxSuccess",[y,D]);}K&&b.event.trigger("ajaxComplete",[y,D]);if(K&&!--b.active){b.event.trigger("ajaxStop");}D.complete&&D.complete.call(D.context,y,P?"success":"error");w=true;if(D.timeout){clearTimeout(C);}setTimeout(function(){x.removeData("form-plugin-onload");x.remove();y.responseXML=null;},100);}var E=b.parseXML||function(n,O){if(window.ActiveXObject){O=new ActiveXObject("Microsoft.XMLDOM");O.async="false";O.loadXML(n);}else{O=(new DOMParser()).parseFromString(n,"text/xml");}return(O&&O.documentElement&&O.documentElement.nodeName!="parsererror")?O:null;};var q=b.parseJSON||function(n){return window["eval"]("("+n+")");};var k=function(S,Q,P){var O=S.getResponseHeader("content-type")||"",n=Q==="xml"||!Q&&O.indexOf("xml")>=0,R=n?S.responseXML:S.responseText;if(n&&R.documentElement.nodeName==="parsererror"){b.error&&b.error("parsererror");}if(P&&P.dataFilter){R=P.dataFilter(R,Q);}if(typeof R==="string"){if(Q==="json"||!Q&&O.indexOf("json")>=0){R=q(R);}else{if(Q==="script"||!Q&&O.indexOf("javascript")>=0){b.globalEval(R);}}}return R;};}};b.fn.ajaxForm=function(c){if(this.length===0){var d={s:this.selector,c:this.context};if(!b.isReady&&d.s){a("DOM not ready, queuing ajaxForm");b(function(){b(d.s,d.c).ajaxForm(c);});return this;}a("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));return this;}return this.ajaxFormUnbind().bind("submit.form-plugin",function(f){if(!f.isDefaultPrevented()){f.preventDefault();b(this).ajaxSubmit(c);}}).bind("click.form-plugin",function(j){var i=j.target;var g=b(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length==0){return;}i=f[0];}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!=undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY;}else{if(typeof b.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top;}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop;}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null;},100);});};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin");};b.fn.formToArray=function(q){var p=[];if(this.length===0){return p;}var d=this[0];var g=q?d.getElementsByTagName("*"):d.elements;if(!g){return p;}var k,h,f,r,e,m,c;for(k=0,m=g.length;k<m;k++){e=g[k];f=e.name;if(!f){continue;}if(q&&d.clk&&e.type=="image"){if(!e.disabled&&d.clk==e){p.push({name:f,value:b(e).val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y});}continue;}r=b.fieldValue(e,true);if(r&&r.constructor==Array){for(h=0,c=r.length;h<c;h++){p.push({name:f,value:r[h]});}}else{if(r!==null&&typeof r!="undefined"){p.push({name:f,value:r});}}}if(!q&&d.clk){var l=b(d.clk),o=l[0];f=o.name;if(f&&!o.disabled&&o.type=="image"){p.push({name:f,value:l.val()});p.push({name:f+".x",value:d.clk_x},{name:f+".y",value:d.clk_y});}}return p;};b.fn.formSerialize=function(c){return b.param(this.formToArray(c));};b.fn.fieldSerialize=function(d){var c=[];this.each(function(){var h=this.name;if(!h){return;}var f=b.fieldValue(this,d);if(f&&f.constructor==Array){for(var g=0,e=f.length;g<e;g++){c.push({name:h,value:f[g]});}}else{if(f!==null&&typeof f!="undefined"){c.push({name:this.name,value:f});}}});return b.param(c);};b.fn.fieldValue=function(h){for(var g=[],e=0,c=this.length;e<c;e++){var f=this[e];var d=b.fieldValue(f,h);if(d===null||typeof d=="undefined"||(d.constructor==Array&&!d.length)){continue;}d.constructor==Array?b.merge(g,d):g.push(d);}return g;};b.fieldValue=function(c,j){var e=c.name,p=c.type,q=c.tagName.toLowerCase();if(j===undefined){j=true;}if(j&&(!e||c.disabled||p=="reset"||p=="button"||(p=="checkbox"||p=="radio")&&!c.checked||(p=="submit"||p=="image")&&c.form&&c.form.clk!=c||q=="select"&&c.selectedIndex==-1)){return null;}if(q=="select"){var k=c.selectedIndex;if(k<0){return null;}var m=[],d=c.options;var g=(p=="select-one");var l=(g?k+1:d.length);for(var f=(g?k:0);f<l;f++){var h=d[f];if(h.selected){var o=h.value;if(!o){o=(h.attributes&&h.attributes.value&&!(h.attributes.value.specified))?h.text:h.value;}if(g){return o;}m.push(o);}}return m;}return b(c).val();};b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields();});};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var d=this.type,c=this.tagName.toLowerCase();if(d=="text"||d=="password"||c=="textarea"){this.value="";}else{if(d=="checkbox"||d=="radio"){this.checked=false;}else{if(c=="select"){this.selectedIndex=-1;}}}});};b.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset();}});};b.fn.enable=function(c){if(c===undefined){c=true;}return this.each(function(){this.disabled=!c;});};b.fn.selected=function(c){if(c===undefined){c=true;}return this.each(function(){var d=this.type;if(d=="checkbox"||d=="radio"){this.checked=c;}else{if(this.tagName.toLowerCase()=="option"){var e=b(this).parent("select");if(c&&e[0]&&e[0].type=="select-one"){e.find("option").selected(false);}this.selected=c;}}});};function a(){if(b.fn.ajaxSubmit.debug){var c="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(c);}else{if(window.opera&&window.opera.postError){window.opera.postError(c);}}}}})(jQuery);(function(a){jQuery.fn.pngFix=function(d){d=jQuery.extend({blankgif:"blank.gif"},d);var c=(navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)==4&&navigator.appVersion.indexOf("MSIE 5.5")!=-1);var b=(navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion)==4&&navigator.appVersion.indexOf("MSIE 6.0")!=-1);if(jQuery.browser.msie&&(c||b)){jQuery(this).find("img[src$=.png]").each(function(){jQuery(this).attr("width",jQuery(this).width());jQuery(this).attr("height",jQuery(this).height());var l="";var g="";var f=(jQuery(this).attr("id"))?'id="'+jQuery(this).attr("id")+'" ':"";var m=(jQuery(this).attr("class"))?'class="'+jQuery(this).attr("class")+'" ':"";var i=(jQuery(this).attr("title"))?'title="'+jQuery(this).attr("title")+'" ':"";var j=(jQuery(this).attr("alt"))?'alt="'+jQuery(this).attr("alt")+'" ':"";var h=(jQuery(this).attr("align"))?"float:"+jQuery(this).attr("align")+";":"";var e=(jQuery(this).parent().attr("href"))?"cursor:hand;":"";if(this.style.border){l+="border:"+this.style.border+";";this.style.border="";}if(this.style.padding){l+="padding:"+this.style.padding+";";this.style.padding="";}if(this.style.margin){l+="margin:"+this.style.margin+";";this.style.margin="";}var k=(this.style.cssText);g+="<span "+f+m+i+j;g+='style="position:relative;white-space:pre-line;display:inline-block;background:transparent;'+h+e;g+="width:"+jQuery(this).width()+"px;height:"+jQuery(this).height()+"px;";g+="filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+jQuery(this).attr("src")+"', sizingMethod='scale');";g+=k+'"></span>';if(l!=""){g='<span style="position:relative;display:inline-block;'+l+e+"width:"+jQuery(this).width()+"px;height:"+jQuery(this).height()+'px;">'+g+"</span>";}jQuery(this).hide();jQuery(this).after(g);});jQuery(this).find("*").each(function(){var f=jQuery(this).css("background-image");if(f.indexOf(".png")!=-1){var e=f.split('url("')[1].split('")')[0];jQuery(this).css("background-image","none");jQuery(this).get(0).runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"',sizingMethod='scale')";}});jQuery(this).find("input[src$=.png]").each(function(){var e=jQuery(this).attr("src");jQuery(this).get(0).runtimeStyle.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale');";jQuery(this).attr("src",d.blankgif);});}return jQuery;};})(jQuery);(function(){var X=window.X={};var _id=100;var DOC=document;X.hook=function(){var pre_init_str="x_init_hook_";for(var h in window){if(0!=h.indexOf(pre_init_str)){continue;}var func=window[h];if(typeof func=="function"){try{func();}catch(e){}}}};X.genId=function(p){p=p||"QNR";return p+"-"+_id++;};X.params=function(u){u=u||location.search;if(!u){return false;}var p=u.split("?");var o={};p=p[1];if(!p){return false;}var list=p.split("&");for(var i=0;i<list.length;i++){var m=list[i];m=m.split("=");o[m[0]]=m.slice(1,m.length).join("=")||"";}return o;};X.get=function(u,callback){return X.ajax(u,"GET",callback);};X.post=function(u,callback){return X.ajax(u,"POST",callback);};X.ajax=function(u,method,callback){var box=X.loading();var ajax={url:u,dataType:"json",type:method,error:function(){X.boxClose(box);X.boxError("\u7F51\u7EDC\u8BF7\u6C42\u51FA\u9519\uFF0C\u8BF7\u68C0\u67E5\u60A8\u7684\u7F51\u7EDC\u6216\u4E0E\u6211\u4EEC\u7684\u5BA2\u670D\u8054\u7CFB\u3002");},success:function(r){X.loadingClose(box);var fun=callback||X.json;fun.call(this,r);}};if(method.toLowerCase()=="post"){ajax.data=X.params(u);}$.ajax(ajax);return false;};X.json=function(r){var type=r.data["type"];var data=r.data["data"];if(type=="alert"){X.boxAlert(data);}else{if(type=="eval"){eval(data);}else{if(type=="refresh"){window.location.reload();}else{if(type=="updater"){var id=data.id;var inner=data.html;jQuery("#"+id).html(inner);}else{if(type=="dialog"){X.boxShow(data,true);}else{if(type=="mix"){for(var x in data){r.data=data[x];X.json(r);}}}}}}}};X.getXY=function(){var x,y;if(document.body.scrollTop){x=document.body.scrollLeft;y=document.body.scrollTop;}else{x=document.documentElement.scrollLeft;y=document.documentElement.scrollTop;}return{x:x,y:y};};X.loading=function(){var id=X.genId();var html='<div id="'+id+'" class="loading_bar">正在请求网络资源...</div>';$("body").append(html);setTimeout(function(){var d=$("#"+id);if(d.length>0){d.remove();}},10000);var b=$("#"+id);if(b.css("position")=="absolute"){b.css("top",X.getXY().y);jQuery(window).scroll(function(){$(".loading_bar").css("top",X.getXY().y);});}return id;};X.tip=function(cft){var html='<div class="pop_tips" style="{cssText}" id="{id}" ><div class="holder"><span class="top_icon"></span><span class="tl"></span><div class="tr"></span><span class="bl"></span><span class="br"></span><a class="close" href="javascript:void(0)"></a><p>{html}</p></div></div>';var o={};X.merge(o,cft);o.id=o.id||X.genId();html=X.template(html,o);if(o.el){o.el.innerHTML=html;}else{$("body").append(html);}$("#"+o.id).find(".close").click(function(){$("#"+o.id).remove();});};X.loadingClose=function(id){if(id){$("#"+id).remove();}else{$("."+id).remove();}};X.JSON=function(r){return eval("("+r+")");};X.boxMask=function(display){var height=jQuery("body").height()+"px";var width=jQuery(window).width()+"px";jQuery("#pagemasker").css({position:"absolute","z-index":"3000",width:width,height:height,opacity:0.5,top:0,left:0,background:"#CCC",display:display});jQuery("#dialog").css("display",display);};var boxPosition=X.boxPosition=function(xy){var dialog=$("#dialog");var ew=dialog.width();var ww=$(window).width();var lt=(ww/2-ew/2)+"px";var wh=$(window).height();var eh=dialog.height();var pxy=X.getXY();var tp=(wh/2-eh/2+pxy.y)+"px";xy=xy||{x:lt,y:tp};if(parseInt(xy.y)<0){xy.y=0;}dialog.css("background-color","#FFF");dialog.css("left",xy.x);dialog.css("top",xy.y);dialog.css("z-index",3001);dialog.css("display","block");};X.template=function(html,data){var reg=/\{([\w-]+)\}/g;return html.replace(reg,function(m,name){return data[name]!==undefined?data[name]:"";});};X.boxShow=function(innerHTML,mask){var id;var dialog=$("#dialog");dialog.find(".boxBody").hide();if(typeof innerHTML=="string"){id=X.genId();var html=' <div class="boxBody" id="{id}">{html}</div>';dialog.html(X.template(html,{id:id,html:innerHTML}));$("#"+id).children().show();boxPosition();}else{var c={};X.merge(c,innerHTML);id=c.id=c.id||X.genId();c.title=c.title||"&nbsp;&nbsp;&nbsp;&nbsp;";c._close=!!!c.notClose?'<a class="close" href="javascript:void(0)">&nbsp;</a>':"";c._btn=!!!c.handler?"":'<div><input type="submit" class="formbutton box-btn fR" value="\u786E\u8BA4" /></div>';var tmp='<div class="boxBody {cls}" id="{id}"><h3 class="t"><b>{title}</b>{_close}</h3><div class="c">{html}</div>{_btn}</div>';dialog.append(X.template(tmp,c));$("#"+id).find(".close").click(function(){X.boxClose(id);});var fun=c.handler||X.boxClose;$("#"+id).find(".box-btn").click(function(){fun.call();});boxPosition(c.xy);}if(!mask){X.boxMask("block");}return id;};X.dialog=function(html){var opts={ok:function(evt){X.boxClose(id);evt.stopPropagation();evt.preventDefault();return false;},close:function(evt){X.boxClose(id);evt.stopPropagation();evt.preventDefault();return false;}};var arg2=arguments[1];if($.isFunction(arg2)){opts.ok=arg2;}else{if($.isPlainObject(arg2)){$.extend(opts,arg2);}else{opts.ok=function(){};}}var id=X.boxShow(X.template(html,opts));var dlg=$("#"+id);opts.id=id;opts.dialog=dlg;dlg.find("[x-type]").each(function(){var type=$(this).attr("x-type");if(opts[type]){$(this).click(function(evt){opts["before_"+type]&&opts["before_"+type].apply(opts,[evt]);opts[type].apply(opts,[evt]);opts["after_"+type]&&opts["after_"+type].apply(opts,[evt]);});}});return opts;};X.boxAlert=function(o){if(typeof o=="string"){o={title:"提示",html:o};}else{o.title=o.title||"";}var x=X.boxShow({title:o.title,html:o.html,handler:function(){if(o.handler){o.handler();}X.boxClose(x);},notClose:true});return x;};X.boxError=function(msg){return X.boxShow({title:"\u51FA\u9519\u5566",html:msg});};X.loadStyle=function(file){var sl=X.scriptlist=X.scriptlist||{};if(!sl[file]||!sl[file]["loaded"]){(sl[file]=sl[file]||{})["loaded"]=true;$($("head")[0]).append('<link href="'+file+'" rel="stylesheet" type="text/css"/>');}};X.loadBase=function(){var box=X.loading();var arg=Array.prototype.slice.call(arguments);var sl=X.scriptlist=X.scriptlist||{};var fun=function(){};var len=arg.length;if(arg[len-1] instanceof Function){fun=arg[len-1];len-=1;}var dill=function(n,err){sl[arg[n]]["loaded"]=true;sl[arg[n]]["error"]=!!err;for(var i=0;i<len;i++){if(!sl[arg[i]]["loaded"]){return false;}}if(n==len-1){X.loadingClose(box);fun.call(this,sl[arg[n]]);}};for(var i=0;i<len;i++){(function(n){var id=X.genId("script");if(!sl[arg[n]]){sl[arg[n]]={loaded:false,url:arg[n]};var o=DOC.createElement("script");o.src=arg[n];o.id=id;if(o.readyState){var fun=function(){if(o.readyState=="loaded"||o.readyState=="complete"){o.detachEvent("onreadystatechange",fun);dill(n);}};o.attachEvent("onreadystatechange",fun);}else{o.onload=function(){dill(n);};o.onerror=function(){dill(n,1);};}DOC.getElementsByTagName("BODY")[0].appendChild(o);}else{dill(n);}}(i));}};X.boxClose=function(id){var Close=function(){jQuery("#dialog").html("");X.boxMask("none");jQuery("#dialog").css("z-index",-9999);};if(!!!id){Close();}else{if($("#dialog > .boxBody").length>1){$("#"+id).remove();$("#dialog >.boxBody:last").show();boxPosition();}else{Close();}}};X.locate=function(url){if(!!!url){return window.location.href;}else{window.location.href=url;}};X.cookie=function(key,val){var c=DOC.cookie;if(!key){return c;}else{var reg=new RegExp("("+key+"=)(\\w*)(;|$)");var v=c.match(reg);if(!val){if(v){return c&&v[2];}else{return"";}}}};X.Cookie={set:function(sName,sValue,iExpires,sPath,sDomain,bSecure){var d=new Date(),sExpires="";if(iExpires){iExpires.constructor==Date?(d=iExpires):d.setSeconds(d.getSeconds()+parseInt(iExpires));sExpires="; expires="+d.toGMTString();}document.cookie=sName+"="+encodeURIComponent(sValue)+sExpires+((sPath)?"; path="+sPath:"")+((sDomain)?"; domain="+sDomain:"")+((bSecure)?"; secure":"");},del:function(sName,sPath,sDomain){document.cookie=sName+"="+((sPath)?"; path="+sPath:"")+((sDomain)?"; domain="+sDomain:"")+"; expires=Thu, 01-Jan-70 00:00:01 GMT";},get:function(sName){return(new RegExp("(?:; )?"+sName+"=([^;]*);?")).test(document.cookie)?decodeURIComponent(RegExp["$1"]):null;}};X.location=function(url){jQuery("#ifra_show").attr({src:url});};X.merge=function(desc,merge){if(desc instanceof Array){$(desc,merge);}else{for(var o in merge){desc[o]=merge[o];}}};X.log=function(){if(typeof console!="undefined"&&console.log){console.log.apply(console,arguments);}};X.error=function(){if(typeof console!="undefined"&&console.error){console.error.apply(console,arguments);}};jQuery(document).ready(X.hook);jQuery(document.body).delegate("[data-href]","click",function(evt){var href=$(this).data("href");var target=$(this).data("href-target");if(href){if(target=="_blank"){window.open(href);}else{window.location=href;}if(this.tagName=="A"){evt.preventDefault();}}});}());(function(){var a='<div class="pop_tuan pop_carts">    <div class="ct cf relative">    	<a x-type="close" href="#" class="pop_close absoute"></a>        <div class="box lh22">        	<div class="info2 t_{icon}1 relative f14">            	<i class="absoute"></i>                {message}            </div>            <div class="btn_box">            	<button x-type="ok" class="btn1">确 定</button>                <button x-type="close" class="btn_Cancel ml36">取 消</button>            </div>        </div>    </div></div>';X.alert=function(b){var c=X.dialog(a,b);c.dialog.find("[x-type='close']").hide();};X.confirm=function(b){var c=X.dialog(a,b);};X.bookingDialog=function(b){return X.dialog('                    <div class="pop_tuan pop_text">                        <div class="ct cf relative">                            <a x-type="close" href="#" class="pop_close absoute"></a>                            <div class="box">                                <div class="title yahei">预订说明</div>                                <ul class="text">                                    <li>1)  当您预订成功后，该订单将不能变更、取消、退款。</li>                                    <li>2)  已预订成功的景点骆驼券，不能再用于其他预订；如预订不成功，景点骆驼券仍可使用。</li>                                    <li>3)  一张景点骆驼券可包含多间夜，可预订的间夜数按景点骆驼券中包含的购买数量进行预订。</li>                                    <li>4)  每次在线预订只支持同一房型预订，如需预订多种房型，请进行多次在线预订。</li>                                    <li>5)  “马上订”的用户，在线预订后30分钟内请及时完成付款，否则在线预订不能成功。</li>                                    <li>6)  在线预订成功后30分钟内如未收到预订确认短信，请电话联系去哪儿网酒店团购客服进行查询，电话：010-57603866。</li>                                    <li>7)  请仔细并详细阅读预订说明，当您选择使用本预订功能时将视为您已阅读并同意去哪儿网的预订规则。</li>                                    <li>8)  去哪儿网为您提供独家房源保障，数量有限，请火速预订。</li>                                </ul>                                <div class="btn_box">                                    <button x-type="close" class="btn1">确 定</button>                                </div>                            </div>                        </div>                    </div>',b||{});};})();$(function(){$.fn.bclk=function(c,b){if(typeof b=="string"||typeof b=="number"){b=[b];}var a;if(b instanceof Array){a=function(){var d=[];for(var e=0;e<b.length&&e<26;e++){d.push(String.fromCharCode(97+e)+"="+encodeURIComponent(b[e].toString()));}return d.join("&");};}else{if(typeof b=="function"){a=function(){return b()||"";};}else{throw new Error("no param or param type error");}}this.each(function(){$(this).bind("click",function(){var d=$(new Image());d.attr("src","http://bc.qunar.com/clk?s="+c+"&"+a());d.css({position:"absolute",left:"-1px",top:"-1px",width:"1px",height:"1px"});d.appendTo(document.body);});});};$("[bclk]").each(function(){var a=window._ba_utm_s;if(!a){return;}$(this).bclk(a,$(this).attr("bclk"));});});if(typeof QNR=="undefined"){var QNR={};}QNR.serviceIm=function(){document.write('<script type="text/javascript" src="http://float2006.tq.cn/floatcard?adminid=9306242&sort=1"><\/script>');var b=function(c){if(TQKF&&TQKF.CreatURL){return TQKF.CreatURL(TQKF.pageinfo_url,"acd","",c);}return"http://vipwebchat.tq.cn/pageinfo.jsp?version=vip&admiuin=9306242&ltype=0&iscallback=0&page_templete_id=33840&is_message_sms=0&is_send_mail=0&action=acd&acd=1&type_code="+c;};var a={open:function(e){var d=((window.screen.height-465)/2);var c=((window.screen.width-660)/2);window.open(b(e),"newwindow","height=465, width=660,top="+d+",left="+c+",toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no");},times:0,permit:false,init:function(){if(!$("#dialog").length){$("body").append($('<div id="pagemasker"></div><div id="dialog" style="position: absolute;z-index: 9999;display: none;border: 4px solid #7D7D7D;background: white;padding: 1px;"> </div>'));document.getElementsByTagName("head")[0].appendChild(document.createElement("style"));var f=document.styleSheets[document.styleSheets.length-1];var c=[{sel:".pop_im_box",styles:"padding: 40px;"},{sel:".pop_im_box_t",styles:"font-size:14px; font-weight:bold; padding-bottom:6px;"},{sel:".pop_im_box_c",styles:"padding-bottom:10px; line-height:24px;"},{sel:".cff0000",styles:"color:#FF0000;"},{sel:".pop_carts .pop_close,.pop_im .pop_close",styles:"right: 8px; top: 8px;"},{sel:".pop_im_box .i_text",styles:"border:1px solid #D3D3D3; float:left; display:inline; _margin-right:-3px; width:170px; height:18px; line-height:18px; margin-top:1px; padding:4px;"},{sel:".pop_im_box .im_btn",styles:"width:100px; height:30px; margin-left:10px; cursor:pointer; border:none; display:inline-block; overflow:hidden; background:url(http://source.qunar.com/site/images/t/i/im_btn.png) 0 0;"},{sel:".pop_im_box .im_btn:hover",styles:"background-position:0 -40px"},{sel:".pop_im_box .im_btn:active",styles:"background-position:0 -80px"},{sel:".pop_im_box button.im_btn1",styles:"width:70px; height:22px; margin-left:5px; vertical-align:middle; background-position:0 -120px;"},{sel:".pop_im_box button.im_btn1:hover",styles:"background-position:0 -152px"},{sel:".pop_im_box button.im_btn1:active",styles:"background-position:0 -184px"}];try{for(var d=0;d<c.length;d++){f.insertRule?f.insertRule(c[d].sel+"{"+c[d].styles+"}",0):f.addRule(c[d].sel,c[d].styles,0);}}catch(g){}}},load:function(){this.init();if(QNR.QUstatus){this.permit=QNR.QUstatus.isLogin();}$(".js_tqim").click(function(k){k.preventDefault();var h=$(this).attr("data-uin");if(!a.permit&&a.times==3){a.showLimitDialog();return;}else{if(!a.permit){a.showCommitDialog();var j=$("#service-im"),f=j.find("input"),g=j.find("button"),i=j.find('[placeholder="message"]');var c=/^1[3,5,7,8]{1}[\d]{9}$/;var d=function(){if(d.requesting){return;}var l=f.val();if($.trim(l)==""){return;}if(c.test($.trim(l))){f.attr("disabled",true);i.html("处理中...");d.requesting=true;var e;$.ajax({url:"/ajax/phone.php",dataType:"json",data:{phone:$.trim(l)},success:function(m){e=m;},error:function(m){i.html('<span class="cff0000">网络异常, 请重试！</span>');e={status:-1};},async:false});d.requesting=false;f.attr("disabled",false);if(parseInt(e.status,10)===1){i.html('<span class="cff0000">查询不到此手机号，请重新输入！</span>');a.times++;if(a.times==3){a.showLimitDialog();return;}}else{if(parseInt(e.status,10)===0){X.boxClose();a.open(h);a.permit=true;}}}else{i.html('<span class="cff0000">对不起, 您输入的手机号格式不正确！</span>');return;}};f.bind("keydown",function(l){if(l.keyCode==13){d();}});f.bind("focus",function(l){i.html("您需要输入下单时留下的手机号码！");});g.bind("click",d);}else{a.open(h);}}});},showCommitDialog:function(){var c=['<div class="pop_tuan pop_im" id="service-im" style="width: 370px">'];c.push('<div class="ct cf relative"><a class="pop_close absoute" js-action="close" href="javascript:void(0);"></a><div class="pop_im_box">');c.push('<div class="pop_im_box_t">为保证服务质量，您请登录：</div>');c.push('<div class="pop_im_box_c" placeholder="message">您需要输入下单时留下的手机号码！</div>');c.push('<div class="cf"><input type="text" class="i_text"><button class="im_btn" type="button"></button>');c.push("</div></div></div></div>");X.boxShow(c.join(""));$('#service-im [js-action="close"]').bind("click",function(){X.boxClose();});},showLimitDialog:function(){X.boxClose();var c=['<div class="pop_tuan pop_im" id="service-im" style="width: 370px">'];c.push('<div class="ct cf relative"><a class="pop_close absoute" js-action="close" href="javascript:void(0);"></a><div class="pop_im_box">');c.push('<div class="pop_im_box_t cff0000">如果您是订单用户，可以<button class="im_btn im_btn1" type="button"></button></div>');c.push('<div class="pop_im_box_c"><p>请务必留下您的联系方式、反馈内容等信息，</p><p>待我们核实后会尽快联系您处理，谢谢！</p></div>');c.push("</div></div></div>");X.boxShow(c.join(""));$('#service-im [js-action="close"]').bind("click",function(){X.boxClose();});$("#service-im button").bind("click",function(){X.boxClose();window.open("http://www.qunar.com/bookingFeedback/interface/feedback/index.htm");});}};return a;}();if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectUtil=="undefined"){deconcept.SWFObjectUtil=new Object();}deconcept.SWFObject=function(n,b,o,e,j,l,g,f,d,m,k){if(!document.createElement||!document.getElementById){return;}this.DETECT_KEY=k?k:"detectflash";this.skipDetect=true;this.params=new Object();this.variables=new Object();this.attributes=new Array();if(n){this.setAttribute("swf",n);}if(b){this.setAttribute("id",b);}if(o){this.setAttribute("width",o);}if(e){this.setAttribute("height",e);}if(j){this.setAttribute("version",new deconcept.PlayerVersion(j.toString().split(".")));}this.installedVer=deconcept.SWFObjectUtil.getPlayerVersion(this.getAttribute("version"),g);if(l){this.addParam("bgcolor",l);}else{this.addParam("wmode","transparent");}var a=f?f:"high";this.addParam("quality",a);this.setAttribute("useExpressInstall",g);this.setAttribute("doExpressInstall",false);var i=(d)?d:window.location;this.setAttribute("xiRedirectUrl",i);this.setAttribute("redirectUrl","");if(m){this.setAttribute("redirectUrl",m);}};deconcept.SWFObject.prototype={setAttribute:function(a,b){this.attributes[a]=b;},getAttribute:function(a){return this.attributes[a];},addParam:function(b,a){this.params[b]=a;},getParams:function(){return this.params;},addVariable:function(b,a){this.variables[b]=a;},getVariable:function(a){return this.variables[a];},getVariables:function(){return this.variables;},getVariablePairs:function(){var c=new Array();var b;var a=this.getVariables();for(b in a){c.push(b+"="+a[b]);}return c;},getSWFHTML:function(){var b="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");}b='<embed type="application/x-shockwave-flash" src="'+this.getAttribute("swf")+'" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'"';b+=' id="'+this.getAttribute("id")+'" name="'+this.getAttribute("id")+'" ';var f=this.getParams();for(var e in f){b+=[e]+'="'+f[e]+'" ';}var d=this.getVariablePairs().join("&");if(d.length>0){b+='flashvars="'+d+'"';}b+=' pluginspage="http://www.macromedia.com/go/getflashplayer"/>';}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");}b='<object id="'+this.getAttribute("id")+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+this.getAttribute("width")+'" height="'+this.getAttribute("height")+'" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0">';b+='<param name="movie" value="'+this.getAttribute("swf")+'" />';var c=this.getParams();for(var e in c){b+='<param name="'+e+'" value="'+c[e]+'" />';}var a=this.getVariablePairs().join("&");if(a.length>0){b+='<param name="flashvars" value="'+a+'" />';}b+="</object>";}return b;},write:function(b){if(this.getAttribute("useExpressInstall")){var a=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(a)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var c=(typeof b=="string")?document.getElementById(b):b;c.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectUtil.getPlayerVersion=function(h,g){var d=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var a=navigator.plugins["Shockwave Flash"];if(a&&a.description){d=new deconcept.PlayerVersion(a.description.replace(/([a-z]|[A-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");for(var b=15;b>6;b--){try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+b);d=new deconcept.PlayerVersion([b,0,0]);break;}catch(f){}}}catch(f){}if(h&&d.major>h.major){return d;}if(!h||((h.minor!=0||h.rev!=0)&&d.major==h.major)||d.major!=6||g){try{d=new deconcept.PlayerVersion(c.GetVariable("$version").split(" ")[1].split(","));}catch(f){}}}return d;};deconcept.PlayerVersion=function(a){this.major=parseInt(a[0])!=null?parseInt(a[0]):0;this.minor=parseInt(a[1])||0;this.rev=parseInt(a[2])||0;};deconcept.PlayerVersion.prototype.versionIsValid=function(a){if(this.major<a.major){return false;}if(this.major>a.major){return true;}if(this.minor<a.minor){return false;}if(this.minor>a.minor){return true;}if(this.rev<a.rev){return false;}return true;};deconcept.util={getRequestParameter:function(c){var d=document.location.search||document.location.hash;if(d){var b=d.indexOf(c+"=");var a=(d.indexOf("&",b)>-1)?d.indexOf("&",b):d.length;if(d.length>1&&b>-1){return d.substring(d.indexOf("=",b)+1,a);}}return"";}};if(Array.prototype.push==null){Array.prototype.push=function(a){this[this.length]=a;return this.length;};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObject;var SWFObject=deconcept.SWFObject;var hexcase=0;var b64pad="";function hex_md5(a){return rstr2hex(rstr_md5(str2rstr_utf8(a)));}function b64_md5(a){return rstr2b64(rstr_md5(str2rstr_utf8(a)));}function any_md5(a,b){return rstr2any(rstr_md5(str2rstr_utf8(a)),b);}function hex_hmac_md5(a,b){return rstr2hex(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)));}function b64_hmac_md5(a,b){return rstr2b64(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(b)));}function any_hmac_md5(a,c,b){return rstr2any(rstr_hmac_md5(str2rstr_utf8(a),str2rstr_utf8(c)),b);}function md5_vm_test(){return hex_md5("abc").toLowerCase()=="900150983cd24fb0d6963f7d28e17f72";}function rstr_md5(a){return binl2rstr(binl_md5(rstr2binl(a),a.length*8));}function rstr_hmac_md5(c,f){var e=rstr2binl(c);if(e.length>16){e=binl_md5(e,c.length*8);}var a=Array(16),d=Array(16);for(var b=0;b<16;b++){a[b]=e[b]^909522486;d[b]=e[b]^1549556828;}var g=binl_md5(a.concat(rstr2binl(f)),512+f.length*8);return binl2rstr(binl_md5(d.concat(g),512+128));}function rstr2hex(c){try{hexcase;}catch(g){hexcase=0;}var f=hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";var a;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);b+=f.charAt((a>>>4)&15)+f.charAt(a&15);}return b;}function rstr2b64(c){try{b64pad;}catch(h){b64pad="";}var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b="";var a=c.length;for(var f=0;f<a;f+=3){var k=(c.charCodeAt(f)<<16)|(f+1<a?c.charCodeAt(f+1)<<8:0)|(f+2<a?c.charCodeAt(f+2):0);for(var d=0;d<4;d++){if(f*8+d*6>c.length*8){b+=b64pad;}else{b+=g.charAt((k>>>6*(3-d))&63);}}}return b;}function rstr2any(m,c){var b=c.length;var l,f,a,n,e;var k=Array(Math.ceil(m.length/2));for(l=0;l<k.length;l++){k[l]=(m.charCodeAt(l*2)<<8)|m.charCodeAt(l*2+1);}var h=Math.ceil(m.length*8/(Math.log(c.length)/Math.log(2)));var g=Array(h);for(f=0;f<h;f++){e=Array();n=0;for(l=0;l<k.length;l++){n=(n<<16)+k[l];a=Math.floor(n/b);n-=a*b;if(e.length>0||a>0){e[e.length]=a;}}g[f]=n;k=e;}var d="";for(l=g.length-1;l>=0;l--){d+=c.charAt(g[l]);}return d;}function str2rstr_utf8(c){var b="";var d=-1;var a,e;while(++d<c.length){a=c.charCodeAt(d);e=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=a&&a<=56319&&56320<=e&&e<=57343){a=65536+((a&1023)<<10)+(e&1023);d++;}if(a<=127){b+=String.fromCharCode(a);}else{if(a<=2047){b+=String.fromCharCode(192|((a>>>6)&31),128|(a&63));}else{if(a<=65535){b+=String.fromCharCode(224|((a>>>12)&15),128|((a>>>6)&63),128|(a&63));}else{if(a<=2097151){b+=String.fromCharCode(240|((a>>>18)&7),128|((a>>>12)&63),128|((a>>>6)&63),128|(a&63));}}}}}return b;}function str2rstr_utf16le(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode(b.charCodeAt(c)&255,(b.charCodeAt(c)>>>8)&255);}return a;}function str2rstr_utf16be(b){var a="";for(var c=0;c<b.length;c++){a+=String.fromCharCode((b.charCodeAt(c)>>>8)&255,b.charCodeAt(c)&255);}return a;}function rstr2binl(b){var a=Array(b.length>>2);for(var c=0;c<a.length;c++){a[c]=0;}for(var c=0;c<b.length*8;c+=8){a[c>>5]|=(b.charCodeAt(c/8)&255)<<(c%32);}return a;}function binl2rstr(b){var a="";for(var c=0;c<b.length*32;c+=8){a+=String.fromCharCode((b[c>>5]>>>(c%32))&255);}return a;}function binl_md5(p,k){p[k>>5]|=128<<((k)%32);p[(((k+64)>>>9)<<4)+14]=k;var o=1732584193;var n=-271733879;var m=-1732584194;var l=271733878;for(var g=0;g<p.length;g+=16){var j=o;var h=n;var f=m;var e=l;o=md5_ff(o,n,m,l,p[g+0],7,-680876936);l=md5_ff(l,o,n,m,p[g+1],12,-389564586);m=md5_ff(m,l,o,n,p[g+2],17,606105819);n=md5_ff(n,m,l,o,p[g+3],22,-1044525330);o=md5_ff(o,n,m,l,p[g+4],7,-176418897);l=md5_ff(l,o,n,m,p[g+5],12,1200080426);m=md5_ff(m,l,o,n,p[g+6],17,-1473231341);n=md5_ff(n,m,l,o,p[g+7],22,-45705983);o=md5_ff(o,n,m,l,p[g+8],7,1770035416);l=md5_ff(l,o,n,m,p[g+9],12,-1958414417);m=md5_ff(m,l,o,n,p[g+10],17,-42063);n=md5_ff(n,m,l,o,p[g+11],22,-1990404162);o=md5_ff(o,n,m,l,p[g+12],7,1804603682);l=md5_ff(l,o,n,m,p[g+13],12,-40341101);m=md5_ff(m,l,o,n,p[g+14],17,-1502002290);n=md5_ff(n,m,l,o,p[g+15],22,1236535329);o=md5_gg(o,n,m,l,p[g+1],5,-165796510);l=md5_gg(l,o,n,m,p[g+6],9,-1069501632);m=md5_gg(m,l,o,n,p[g+11],14,643717713);n=md5_gg(n,m,l,o,p[g+0],20,-373897302);o=md5_gg(o,n,m,l,p[g+5],5,-701558691);l=md5_gg(l,o,n,m,p[g+10],9,38016083);m=md5_gg(m,l,o,n,p[g+15],14,-660478335);n=md5_gg(n,m,l,o,p[g+4],20,-405537848);o=md5_gg(o,n,m,l,p[g+9],5,568446438);l=md5_gg(l,o,n,m,p[g+14],9,-1019803690);m=md5_gg(m,l,o,n,p[g+3],14,-187363961);n=md5_gg(n,m,l,o,p[g+8],20,1163531501);o=md5_gg(o,n,m,l,p[g+13],5,-1444681467);l=md5_gg(l,o,n,m,p[g+2],9,-51403784);m=md5_gg(m,l,o,n,p[g+7],14,1735328473);n=md5_gg(n,m,l,o,p[g+12],20,-1926607734);o=md5_hh(o,n,m,l,p[g+5],4,-378558);l=md5_hh(l,o,n,m,p[g+8],11,-2022574463);m=md5_hh(m,l,o,n,p[g+11],16,1839030562);n=md5_hh(n,m,l,o,p[g+14],23,-35309556);o=md5_hh(o,n,m,l,p[g+1],4,-1530992060);l=md5_hh(l,o,n,m,p[g+4],11,1272893353);m=md5_hh(m,l,o,n,p[g+7],16,-155497632);n=md5_hh(n,m,l,o,p[g+10],23,-1094730640);o=md5_hh(o,n,m,l,p[g+13],4,681279174);l=md5_hh(l,o,n,m,p[g+0],11,-358537222);m=md5_hh(m,l,o,n,p[g+3],16,-722521979);n=md5_hh(n,m,l,o,p[g+6],23,76029189);o=md5_hh(o,n,m,l,p[g+9],4,-640364487);l=md5_hh(l,o,n,m,p[g+12],11,-421815835);m=md5_hh(m,l,o,n,p[g+15],16,530742520);n=md5_hh(n,m,l,o,p[g+2],23,-995338651);o=md5_ii(o,n,m,l,p[g+0],6,-198630844);l=md5_ii(l,o,n,m,p[g+7],10,1126891415);m=md5_ii(m,l,o,n,p[g+14],15,-1416354905);n=md5_ii(n,m,l,o,p[g+5],21,-57434055);o=md5_ii(o,n,m,l,p[g+12],6,1700485571);l=md5_ii(l,o,n,m,p[g+3],10,-1894986606);m=md5_ii(m,l,o,n,p[g+10],15,-1051523);n=md5_ii(n,m,l,o,p[g+1],21,-2054922799);o=md5_ii(o,n,m,l,p[g+8],6,1873313359);l=md5_ii(l,o,n,m,p[g+15],10,-30611744);m=md5_ii(m,l,o,n,p[g+6],15,-1560198380);n=md5_ii(n,m,l,o,p[g+13],21,1309151649);o=md5_ii(o,n,m,l,p[g+4],6,-145523070);l=md5_ii(l,o,n,m,p[g+11],10,-1120210379);m=md5_ii(m,l,o,n,p[g+2],15,718787259);n=md5_ii(n,m,l,o,p[g+9],21,-343485551);o=safe_add(o,j);n=safe_add(n,h);m=safe_add(m,f);l=safe_add(l,e);}return Array(o,n,m,l);}function md5_cmn(h,e,d,c,g,f){return safe_add(bit_rol(safe_add(safe_add(e,h),safe_add(c,f)),g),d);}function md5_ff(g,f,k,j,e,i,h){return md5_cmn((f&k)|((~f)&j),g,f,e,i,h);}function md5_gg(g,f,k,j,e,i,h){return md5_cmn((f&j)|(k&(~j)),g,f,e,i,h);}function md5_hh(g,f,k,j,e,i,h){return md5_cmn(f^k^j,g,f,e,i,h);}function md5_ii(g,f,k,j,e,i,h){return md5_cmn(k^(f|(~j)),g,f,e,i,h);}function safe_add(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535);}function bit_rol(a,b){return(a<<b)|(a>>>(32-b));}(function(f){var j=document;var h=".";var e="able-countdown-";var b=new Date().getTime();var i=24*3600*1000,c=3600*1000,d=60*1000,g=1000;CD=a.prototype;function a(m,l){var k=this;k.config=f.extend({},f.fn.countdown.defaults,l||{});k.$container=m;k._init();}f.extend(CD,{_init:function(){var k=this;if(k._parseStructure()){k._start();}},_parseStructure:function(){var k=this,m=k.$container,l=k.config;k.$panels=m.find(h+l.contentCls);k.$diff=l.datadiff*1000;return k.$diff>0;},_start:function(){var k=this;var m=k.config;var l=new Date().getTime();k.$timeout=m.second.show?(m.millisecond.show?280:1000):(60*1000);var n=k.$timeout;setTimeout(function(){k._show();},n);},_show:function(){var w=this;var o=w.config;var m=new Date().getTime();var u=w.$diff;var t=w.$timeout;var p=u+b-m;if(p>0){var v=Math.floor(p/i);var q=Math.floor((p-v*i)/c);var r=Math.floor((p-v*i-q*c)/d);var x=Math.floor((p-v*i-q*c-r*d)/g);var l=Math.floor(p-v*i-q*c-r*d-x*g).toString().substr(0,1);var n=o.millisecond.show?"."+l:"";var k=o.second.show?"<"+o.second.ele+" "+o.second.style+">"+x+n+"</"+o.second.ele+">秒":"";if(v>0){var s="<"+o.day.ele+" "+o.day.style+">"+v+"</"+o.day.ele+">天<"+o.hour.ele+" "+o.hour.style+">"+q+"</"+o.hour.ele+">小时<"+o.minute.ele+" "+o.minute.style+">"+r+"</"+o.minute.ele+">分"+k;}else{var s="<"+o.hour.ele+" "+o.hour.style+">"+q+"</"+o.hour.ele+">小时<"+o.minute.ele+" "+o.minute.style+">"+r+"</"+o.minute.ele+">分"+k;}w.$panels.html(s);}else{setTimeout(function(){o.callfn();},parseInt(Math.random()*200*1000,10));}setTimeout(function(){w._show();},t);}});f.fn.countdown=function(k){var m=this;var l=m.data("countdowns");m.data("countdowns",l?l:[]);return m.each(function(){m.data("countdowns").push(new a(f(this),k));});};f.fn.countdown.defaults={contentCls:e+"content",day:{ele:"span",style:"class=d"},hour:{ele:"span",style:"class=h"},minute:{ele:"span",style:"id=m"},second:{ele:"span",style:"class=s",show:true},millisecond:{show:true},callfn:function(){location.reload();},datadiff:0};})(jQuery);(function(c){var a={oneday:24*60*60*1000,today:function(){var d=new Date();return new Date(d.getFullYear(),d.getMonth(),d.getDate());},isvalid:function(e){try{a.parse(e);return true;}catch(d){return false;}},formatLocal:function(e){var d=a.toArr(a.parse(e));return d[0]+"年"+d[1]+"月"+d[2]+"日";},format:function(e){var d=a.toArr(e);return d.join("-");},toArr:function(f){var h=f.getFullYear();var e=f.getMonth()+1;if(e<10){e="0"+e;}var g=f.getDate();if(g<10){g="0"+g;}return[h,e,g];},addDay:function(d,e){return new Date(d.getTime()+(a.oneday*e));},getFirstByMonth:function(d){return new Date(d.getFullYear(),d.getMonth(),1);},getLastByMonth:function(d){var e=new Date(d.getFullYear(),d.getMonth()+1,1);return a.addDay(e,-1);},parse:function(d){if(d instanceof Date){return d;}else{if(/^\d+$/.test(d)){return new Date(parseInt(d,10));}else{return new Date(Date.parse(d.replace(/-/g,"/")));}}},diff:function(g,f){var e=this.parse(g);var d=this.parse(f);return Math.abs(e-d)/1000/60/60/24;},eachDay:function(m,j,o){var f=this.parse(m);var e=this.parse(j);var g=this.diff(f,e);for(var h=0;h<g+1;h++){var l=this.addDay(f,h);var k=this.format(l);var p=o(l,k);if(p===false){break;}else{if(p===true){continue;}}}}};function b(d){this.opts=c.extend({currentDay:a.today(),DAYS_HEADER:[0,1,2,3,4,5,6]},d);}b.prototype={today:function(){return this.opts.currentDay;},nextMonth:function(){var d=this.opts.currentDay;this.opts.currentDay=new Date(d.getFullYear(),d.getMonth()+1,1);this._refreshTable();},prevMonth:function(){var d=this.opts.currentDay;this.opts.currentDay=new Date(d.getFullYear(),d.getMonth()-1,1);this._refreshTable();},changeDay:function(d){this.opts.currentDay=a.parse(d);this._refreshTable();},refresh:function(){this._refreshTable();},_wrapItem:function(e){var f=new Date(e);return{currentMonth:f.getMonth()==this.opts.currentDay.getMonth(),date:f};},_refreshTable:function(){var e=this.opts;var l=a.getFirstByMonth(e.currentDay);var m=a.getLastByMonth(e.currentDay);var d=this._findClosestDateByDay(l,e.DAYS_HEADER[0],true);var g=this._findClosestDateByDay(m,e.DAYS_HEADER[e.DAYS_HEADER.length-1],false);var f=d.getTime();var p=[];for(var k=0;k<6;k++){p[k]=[];for(var h=0;h<e.DAYS_HEADER.length;h++){p[k][h]=this._wrapItem(f);f=f+a.oneday;}}c(this).trigger("refreshed",[p]);},_findClosestDateByDay:function(e,h,g){var f=this.opts.DAYS_HEADER;var d=c.inArray(e.getDay(),f);if(g){return a.addDay(e,-d);}else{return a.addDay(e,f.length-d-1);}}};window.DateUtil=a;window.CalendarCore=b;})(jQuery);var $cs=function(a){return document.getElementById(a);};String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"");};var ADManager=new (function(){function a(){if(typeof console!="undefined"){console.info(Array.prototype.slice.apply(arguments).join());}}this.onload_func=[];this.onload=function(b){if(b){this.onload_func.push(b);}};this.loaded=function(d){for(var b=this.onload_func.length-1;b>=0;b--){var c=this.onload_func[b];c.call(this,d);}};this.getISpace=function(g){try{var f=document.getElementById(g).contentWindow.document.getElementsByTagName("i");var b=0;for(var d=0;d<f.length;d++){var e=f[d];if(e&&e.getAttribute("space")=="yes"){b++;}}return b;}catch(c){return 0;}};this.urlparams="";this.urlParamsFunc=null;this._cityInfo=false;this.outtime=5000;this.recived=false;this._cancelRequest=false;this.margin={};this._adId=null;this._tile=new Date().getTime().toString()+new String(parseInt(Math.random()*10000000));this._tileGroup=function(b){var c=b.getAttribute("tilegroup");if(c){return"tile="+(this._tile+c);}else{return"tile="+this._tile;}};this._transactionID=new Date().getTime().toString()+new String(parseInt(Math.random()*10000000));this._transactionGroup=function(b){var c=b.getAttribute("transGroup");if(c){return"&TransactionID="+(this._transactionID+c);}else{return"";}};this.load=function(b){var d=this;if(typeof b!="undefined"){this._adId=b;}if(!this._cityInfo){var c=d._script=document.createElement("script");c.type="text/javascript";c.src="http://api.qunar.com/ips.jcp?callback=ADManager._showAd";c.onload=c.onreadystatechange=function(){if(c.readyState&&c.readyState!="loaded"&&c.readyState!="complete"){return;}c.onreadystatechange=c.onload=null;d.recived=true;};var e=document.getElementsByTagName("HEAD")[0];e.appendChild(c);requested=true;setTimeout(function(){if(!d._cityInfo){d._cityInfo={city:""};d._showAd({city:""});d._cancelRequest=true;if(d._script){try{d._script.parentNode.removeChild(d._script);}catch(f){}}}},this.outtime);}else{this._showAd(this._cityInfo);}};this._getQueryString=function(d){var c=window.location.search;var b=new RegExp(""+d+"=([^&?]*)","ig");return((c.match(b))?(c.match(b)[0].substr(d.length+1)):null);};this._showAd=function(l){var p=this;this._cityInfo=l;this.ipCity=encodeURIComponent(l.city);if(this.urlParamsFunc&&typeof this.urlParamsFunc=="function"&&this.urlparams==""){this.urlparams=this.urlParamsFunc()||"";}if(this.ipCity!=""){var n=["city=",this.ipCity,this.urlparams];}else{var n=[this.urlparams];}var e=this._getQueryString("adtest");var f=this._getQueryString("testad");if(e){n.push(["&adtest=",e].join(""));}if(f){n.push(["&testad=",f].join(""));}this.allUrlparams=n.join("");if(this._adId){this._tile=new Date().getTime().toString()+new String(parseInt(Math.random()*10000000));var c=$cs(this._adId).getAttribute("marginTop")||0;var j=$cs(this._adId).getAttribute("marginBottom")||0;this.margin[this._adId]={marginTop:c,marginBottom:j};this._creatAng($cs(this._adId));}else{var k=document.getElementsByTagName("iframe");if(!k||k.length<=0){return;}for(var h=0;h<k.length;h++){var o=k[h];var g=o.getAttribute("delay");var d=o.id;var b=o.getAttribute("depend");var c=o.getAttribute("marginTop")||0;var j=o.getAttribute("marginBottom")||0;this.margin[d]={marginTop:c,marginBottom:j};o.style.marginTop="0px";o.style.marginBottom="0px";if(!b){if(!g){this._creatAng(o);}else{g=parseInt(g,10);setTimeout(function(i){return function(){p._creatAng($cs(i));};}(d),g);}}else{var m=$cs(b);if(m){m.dependimpl=(function(i){return function(){p._creatAng($cs(i));};})(d);}else{a("[ADManager ERROR] not found depend : ",b);}}}}};this._creatAng=function(g){var d=g.getAttribute("src");if(d==null||(d!=null&&d.trim()=="")||d.indexOf("ad.html")>-1){var c=g.getAttribute("id");if(!c){return;}var e=g.getAttribute("querystring");var f=g.getAttribute("zonid");var b=g.getAttribute("count");if(!b){b=1;}if(!e&&!f){return;}if(e){if(this.preloadAD&&typeof this.preloadAD=="function"){e=this.preloadAD(c,g,e);}e=this._complement(c,g,e);if(e){g.src=["/vataframe/banner.html?framId=",c,"&",this.allUrlparams,"&",e,"&",this._tileGroup(g),this._transactionGroup(g)].join("");}}else{if(f){g.src=["/vataframe/banner.html?framId=",c,"&",this.allUrlparams,"&zonid=",f,"&count=",b,"&",this._tileGroup(g),this._transactionGroup(g)].join("");}}}this._adId=null;};this._complement=function(e,m,b){var j=m.getAttribute("depend");var l=m.getAttribute("depend-complement");var h=m.getAttribute("depend-complement-querystr")||"qnum";if(j==null||l==null){return b;}var n=$cs(j);var f=parseInt(l,10);var c=n.contentWindow.document.getElementsByTagName("i");var g=0;for(var d=0;d<c.length;d++){var o=c[d];if(o&&o.getAttribute("space")=="yes"){g++;}}if(g){var k=b;k=this._replaceArgu(k,"qnum",g);k=this._replaceArgu(k,"qtype","js");return k;}else{return null;}};this._replaceArgu=function(c,f,g){var b=c.replace(new RegExp(f+"=[^&]*","g"),"").split("&");b.push(f+"="+g);var d=[];for(var e=0;e<b.length;e++){if(b[e]){d.push(b[e]);}}return d.join("&");};this.setIfrmHeight=function(c,b,d){if(!$cs(c)){return;}if(d){$cs(c).style.display=d;}if(b=="auto"){$cs(c).style.height=b;if($cs(c+"_title")){$cs(c+"_title").style.display="block";}if($cs(c+"_footer")){$cs(c+"_footer").style.display="block";}}else{if(b<10){$cs(c).style.height=b+"px";$cs(c).style.marginTop="0px";$cs(c).style.marginBottom="0px";$cs(c).style.display="none";}else{$cs(c).style.height=b+"px";if(this.margin[c]){$cs(c).style.marginTop=this.margin[c].marginTop+"px";}if(this.margin[c]){$cs(c).style.marginBottom=this.margin[c].marginBottom+"px";}if($cs(c+"_title")){$cs(c+"_title").style.display="block";}if($cs(c+"_footer")){$cs(c+"_footer").style.display="block";}}}if($cs(c)&&$cs(c).dependimpl){$cs(c).dependimpl();}this.loaded(c);};window.setIfrmHeight=function(c,b,d){if(!$cs(c)){return;}if(d){$cs(c).style.display=d;}if(b=="auto"){$cs(c).style.height=b;}else{$cs(c).style.height=b+"px";}};})();(function(){$(document).ready(function(){ADManager.load();});})();var WEB_ROOT=WEB_ROOT||"";window.x_init_hook_ad=function(){$ADM.init().set_options({adm_html_path:"/vataframe/adm_banner.html"}).load();};window.x_init_hook_headerMenu=function(){$("#menu_tzt").click(function(a){var b=$(this);a.stopPropagation();$(this).addClass("zt");$(this).children("a").addClass("bg_drop");$("#bg_drop").show();jQuery(document).bind("click",function(c){b.children("#bg_drop").hide(100,function(){b.removeClass("zt");b.children("a").removeClass("bg_drop");});});});};window.x_init_hook_validator=function(){jQuery("form.validator").each(function(){if(this.id=="tip-deal-subscribe-form"){var a=jQuery(this);var c=a.find("input[name='email']"),b="请输入您的Email地址";c.val(b);c.live("focus",function(){if(c.val()==b){c.val("");}});c.live("blur",function(){if(c.val()==""){c.val(b);}});a.submit(function(){if(!jQuery.fn.validateForm("",a)){X.boxAlert('<div style="padding: 30px 50px; width: 150px; height: 30px">请输入正确的Email格式</div>');return false;}return true;});}else{jQuery.fn.checkForm(this);}});jQuery("a.needlogin").click(X.misc.needlogin);};window.x_init_hook_myaccount=function(){var b=jQuery("#myaccount");var a=jQuery("#myaccount-menu");b.hover(function(){a.show();b.toggleClass("hover",true);},function(){var c=function(){a.hide();b.toggleClass("hover",false);};menuout=setTimeout(c,100);});a.hover(function(){clearTimeout(menuout);},function(){jQuery(this).hide();b.toggleClass("hover",false);});};window.x_init_hook_click=function(){$(".btn_selectdate").bind("click",function(d){d.stopPropagation();var c=$(this);var a=c.parent().find("div.pop_Calendar");$("div.date_box").css("zIndex",1);$("div.pop_Calendar").not(a).css("display","none");if(a.size()){a.toggle();c.parent().css("zIndex",2);jQuery(document).bind("click",function(f){a.hide();});var b=a.find("dd>a");if(b.size()){b.click(function(g){var f=$(this);c.val(f.attr("value"));g.preventDefault();});}}});$(".sicon").click(function(a){$(this).prev().trigger("click");a.stopPropagation();});$(".btnBook.interflighturl").click(function(){var d=$(this);var a=d.parent().parent().next().next().find("input.btn_selectdate");if(a.size()){var b=a.val();if(b!="请选择回程日期"){var c=d.attr("data-href")+"&returnDate="+b+"&tid="+$("#team_id").val();d.attr("href",c);}else{X.boxAlert("请选择返程日期！");return false;}}});$("#getValidatorCode").click(function(){var a=$("#settings-mobile").val();$("#getValidatorCode").attr("disabled",true);if(/^13\d{9}$/g.test(a)||(/^15[0-35-9]\d{8}$/g.test(a))||(/^18\d{9}$/g.test(a))){$.ajax({type:"GET",url:"/ajax/sms.php",data:"action=lottery_captcha&mobile="+$("#settings-mobile").val()+"&team_id="+$("#team_id").val(),success:function(c){$(".order_tips2").html("发送成功，2分钟后还未收到请重新获取");$(".order_tips2").show();var b=119;setTimeout(function(){if(b>0){b--;var d="重新获取("+b+"s)";$("#getValidatorCode").val(d);setTimeout(arguments.callee,999);}else{$("#getValidatorCode").val(" 重新获取验证码");$("#getValidatorCode").attr("disabled",false);}},999);}});}else{$(".order_tips2").html("手机号输入不正确");$(".order_tips2").show();$("#getValidatorCode").attr("disabled",false);}});$(".mail_subscribe").click(function(a){$("#mail_holder").addClass("on");a.stopPropagation();});jQuery(document).bind("click",function(a){$("#mail_holder").removeClass("on");});$("#ctl_city-list").click(function(a){jQuery("#guides-city-list").css("display","block");$("#fixIE6selectBug").css("display","block");a.stopPropagation();});jQuery(document).bind("click",function(a){jQuery("#guides-city-list").css("display","none");$("#fixIE6selectBug").css("display","none");});jQuery("#sysmsg-guide-close").click(function(){jQuery("#sysmsg-guide").remove();return !X.get(WEB_ROOT+"/ajax/newbie.php");});jQuery("#sysmsg-error span.close").click(function(){return !jQuery("#sysmsg-error").remove();});jQuery("#sysmsg-success span.close").click(function(){return !jQuery("#sysmsg-success").remove();});jQuery(".deal-share-im").click(function(){return !jQuery(".deal-share-im-c").toggle();});jQuery("a.ajaxlink").click(function(){var c=jQuery(this);if(c.attr("no")=="yes"){return false;}var a=c.attr("href");var b=c.attr("ask");if(a.indexOf("/delete")>0&&!confirm("确定删除本条记录吗？")){return false;}else{if(b&&!confirm(b)){return false;}}if(c.attr("method")=="post"){X.post(a);}else{X.get(a);}return false;});jQuery("a.remove").click(function(){var a=jQuery(this).attr("href");if(confirm("确定删除该条记录吗？")){X.post(a);}return false;});jQuery(".remove-record").click(function(){return confirm("确定删除该条记录吗？");});jQuery("a.delay").click(function(){var a=jQuery(this).attr("href");if(confirm("确定要将此团购项目延期一天吗？")){return !X.post(a)&&false;}return false;});jQuery("#cardcode-link").click(function(){jQuery(".cardcode .act").toggle();});jQuery("#cardcode-verify-id").click(X.misc.cardcode);jQuery('#consult-add-form input[name="commit"]').click(function(){jQuery("#consult-add-form").ajaxSubmit({success:function(a){alert(a);X.team.consultation_again();}});return false;});jQuery("#consult-add-more").click(X.team.consultation_again);jQuery("#express-zone-div input").live("click",function(){var a=jQuery(this).attr("value");if(a=="express"){jQuery("#express-zone-express").css("display","block");jQuery("#express-zone-pickup").css("display","none");jQuery("#express-zone-coupon").css("display","none");}else{if(a=="pickup"){jQuery("#express-zone-pickup").css("display","block");jQuery("#express-zone-express").css("display","none");jQuery("#express-zone-coupon").css("display","none");}else{if(a=="coupon"){jQuery("#express-zone-coupon").css("display","block");jQuery("#express-zone-pickup").css("display","none");jQuery("#express-zone-express").css("display","none");}else{if(a=="voucher"){jQuery("#express-zone-coupon").css("display","none");jQuery("#express-zone-pickup").css("display","none");jQuery("#express-zone-express").css("display","none");}}}}});jQuery("#mail-zone-div input").click(function(){var a=jQuery(this).attr("value");if(a=="smtp"){jQuery("#mail-zone-smtp").css("display","block");}else{jQuery("#mail-zone-smtp").css("display","none");}});jQuery("#share-copy-text").click(function(){jQuery(this).select();});jQuery("#share-copy-button").click(function(){X.misc.copyToCB("share-copy-text");});jQuery("#verify-coupon-id").click(function(){X.get(WEB_ROOT+"/ajax/coupon.php?action=dialog");});jQuery("#deal-subscribe-form").submit(function(){var a=jQuery("#deal-subscribe-form-email").attr("value");return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a);});jQuery("#header-subscribe-form").submit(function(){var a=jQuery("#header-subscribe-email").attr("value");return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(a);});jQuery('input[xtip$="."]').each(X.misc.inputblur);jQuery('input[xtip$="."]').focus(X.misc.inputclick);jQuery('input[xtip$="."]').blur(X.misc.inputblur);$("a.share").click(function(){var c=$(this).data("itemid");if(!c){return;}var a=$(".share_fuceng");a.css("display","none");var b='<ul class="cf"> <li><a href="javascript:void(0)" class="share_qq">MSN/QQ</a></li><li><a class="sina" target="_blank" href="/redirect.php?id='+c+'&t=sina">新浪</a></li><li><a class="t_qq" target="_blank" href="/redirect.php?id='+c+'&t=qq">腾讯</a></li><li><a class="kaixin" target="_blank" href="/redirect.php?id='+c+'&t=kaixin">开心</a></li><li><a class="renren" target="_blank" href="/redirect.php?id='+c+'&t=renren">人人</a></li><li><a class="douban" target="_blank" href="/redirect.php?id='+c+'&t=douban">豆瓣</a></li>  </ul>';a.find("div.c").html(b);var d=$(this).offset();a.css("left",d.left-205);a.css("top",d.top+19);a.find("div.c").removeClass("share_qq_msn");a.css("display","block");a.find("a.close").click(function(){a.css("display","none");});a.find(".share_qq").click(function(){a.find("div.c").html('<p><div class="qq_msn">MSN/QQ</div><div class="tip">复制如下内容通过MSN或QQ发送给好友：</div><input type="text" value="http://tuan.qunar.com/team.php?id='+c+'" /></p>').addClass("share_qq_msn");});});$("#openpartnerdetail").click(function(){$(this).html($(this).html()=="展开详情"?"关闭详情":"展开详情");$("#partner_detail").toggleClass("hide");});$(".destnation_priority").click(function(){$(this.parentNode).toggleClass("current");$(this).html($(this).html()=="收起"?"更多":"收起");$(this.parentNode).find(".morepri").toggle();});};window.x_init_hook_order=function(){jQuery('form[id="order-pay-form"]').bind("submit",function(){X.get(WEB_ROOT+"/ajax/order.php?action=dialog&id="+jQuery(this).attr("sid"));});};X.misc={};X.misc.copyToCB=function(e){var c=jQuery("#"+e);c.select();var f=c.val();if(window.clipboardData){if((window.clipboardData.setData("Text",f))){var i=c.attr("tip");if(i){alert(i);}return true;}}else{if(window.netscape){netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");var d=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!d){return;}var j=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!j){return;}j.addDataFlavor("text/unicode");var h=new Object();var g=new Object();var h=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var b=f;h.data=b;j.setTransferData("text/unicode",h,b.length*2);var a=Components.interfaces.nsIClipboard;if(!d){return false;}d.setData(j,null,a.kGlobalClipboard);var i=c.attr("tip");if(i){alert(i);}return true;}}return false;};X.misc.scaleimage=function(b,c){var a=jQuery(b).width();if(a>c){jQuery(b).css("width",c+"px");}};X.misc.inputblur=function(){var a=jQuery(this).attr("value");var b=jQuery(this).attr("xtip");if(a==b||!a){jQuery(this).attr("value",b);jQuery(this).css("color","#999");}};X.misc.inputclick=function(){var a=jQuery(this).attr("value");var b=jQuery(this).attr("xtip");if(a==b){jQuery(this).attr("value","");}jQuery(this).css("color","#333");};X.misc.noticenext=function(a,b){jQuery("#dialog_subscribe_count_id").html(b);return X.get(WEB_ROOT+"/ajax/manage.php?action=noticesubscribe&id="+a+"&nid="+b);};X.misc.noticenextsms=function(a,b){jQuery("#dialog_smssubscribe_count_id").html(b);return X.get(WEB_ROOT+"/ajax/manage.php?action=noticesmssubscribe&id="+a+"&nid="+b);};X.misc.noticesms=function(a,b){jQuery("#dialog_sms_count_id").html(b);return X.get(WEB_ROOT+"/ajax/manage.php?action=noticesms&id="+a+"&nid="+b);};X.misc.needlogin=function(){return LOGINUID>0?true:!X.get(WEB_ROOT+"/ajax/system.php?action=needlogin");};X.misc.cardcode=function(){var a=jQuery("#cardcode-order-id").attr("value");var b=jQuery("#cardcode-card-id").attr("value");if(a&&b){return !X.get(WEB_ROOT+"/ajax/order.php?action=cardcode&id="+a+"&cid="+b);}};X.misc.smscount=function(){var a=jQuery("#sms-content-id").val().length;var b=Math.ceil(a/70);jQuery("#span-sms-length-id").html(a);jQuery("#span-sms-split-id").html(b);};X.misc.locale=function(){return X.get(WEB_ROOT+"/ajax/system.php?action=locale");};X.team={};X.team.consultation_again=function(){jQuery("#consult-content").val("");jQuery("#consult-add-form").toggle();jQuery("#consult-add-succ").toggle();};X.coupon={};X.coupon.dialogquery=function(){var a=jQuery("#coupon-dialog-input-id").attr("value");if(a){return !X.get(WEB_ROOT+"/ajax/coupon.php?action=query&cid="+encodeURIComponent(a));}};X.coupon.dialogconsume=function(){var c=$.trim(jQuery("#coupon-dialog-input-id").attr("value"));var a=$.trim(jQuery("#coupon-dialog-input-secret").attr("value"));if(c&&a){var b=$.trim(jQuery("#coupon-dialog-consume").attr("ask"));return confirm(b)&&!X.get(WEB_ROOT+"/ajax/coupon.php?action=consume&cid="+encodeURIComponent(c)+"&secret="+encodeURIComponent(a));}};X.coupon.dialoginputkeyup=function(a){jQuery(a).attr("value",jQuery(a).attr("value").toUpperCase());};X.miscajax=function(a,b){return !X.get(WEB_ROOT+"/ajax/"+a+".php?action="+b);};X.misc.captcha=function(b){var a=typeof(b)=="string"?jQuery("#"+b):jQuery(b);a.attr("src",WEB_ROOT+"/captcha.php?"+Math.random());};(function(){var e={};var h="javascript:void(0);";var b={dataid:"js-data-id",cityid:"js-city-id",cityname:"js-city-name"};var f={keys:b,structs:{panel:'<div class="holder cf"><div class="content" js-place-holder="filters" js-close-class="hide"></div><div class="content1" js-place-holder="more-filters" js-close-class="hide"></div></div>',target:'<div class="box cf"><strong class="t">{filter-name}</strong><div class="c" js-place-holder="cn"><dl class="li" js-place-holder="shortcut"><dd js-place-holder="cn.item"><a href="{link}" '+b.cityname+'="{name}" js-city-id="{id}">{name}({contain})</a></dd></dl><div class="more" js-place-holder="cn.switch" js-active-class="more_on">更多</div><div class="hidect" js-place-holder="cn.picker" js-unactive-class="hide"></div></div><div class="c" js-place-holder="fn"><dl class="li" js-place-holder="shortcut"><dd js-place-holder="fn.item"><a href="{link}" '+b.cityname+'="{name}" js-city-id="{id}">{name}({contain})</a></dd></dl><div class="more" js-place-holder="fn.switch" js-active-class="more_on">更多</div><div class="hidect" js-place-holder="fn.picker" js-unactive-class="hide"></div></div></div>',common:'<div class="box cf"><strong class="t">{filter-name}</strong><div class="c"><dl class="li"><dd js-place-holder="item"><a href="{link}" '+b.dataid+'="{id}">{name}</a></dd></dl></div></div>',"common-num":'<div class="box cf"><strong class="t">{filter-name}</strong><div class="c"><dl class="li"><dd js-place-holder="item"><a href="{link}" '+b.dataid+'="{id}">{name}({contain})</a></dd></dl></div></div>',"more-switch":'<a class="open" js-place-holder="openfilters" js-unactive-class="open_close" js-active-text="隐藏筛选区" js-unactive-text="显示筛选区" href="javascript:void(0);">显示筛选区</a>'},getLink:function(j,l,o){var n=[],p=$.extend({},e.params,j);if(typeof o=="undefined"){o=e.link;}if(o===false){return this._getPath(j,l);}if(l){for(var k=0;k<l.length;k++){if(l[k] in p){delete p[l[k]];}}}for(var q in p){if(q=="in_track"){n.push(q+"="+p[q]);}else{n.unshift(q+"="+p[q]);}}return o+"?"+n.join("&");},_getPath:function(n,s){var l=window.location.toString();var k=l,t={};if(window.location.search.length){var j=window.location.search.substring(1,window.location.search.length).split("&");for(var o=0,r;o<j.length;o++){r=j[o].split("=");if(r[0].length){t[r[0]]=r[1];}}}if(l.indexOf("?")!=-1){k=l.substring(0,l.indexOf("?"));}var q=this;this._getPath=function(i,m){return q.getLink($.extend({},t,i),m,k);};return this._getPath(n,s);}};var c={load:function(i,j){this.data=i;this.config=$.extend({params:j},f);this.draw();this.bindEvents();},indexTargetData:function(o){var q={ids:{},path:{},get:function(i){if(typeof i=="object"){if(!this.ids[i.i]){return this.ids[i.i]=i;}return i;}if(i.toString().split(",").length==1){return this.ids[i.toString()];}return this.path[i];}};var s,u=["cn","fn"];var v=["","",""];for(var n=0;n<u.length;n++){v[0]=u[n];if(!o[v[0]]){continue;}s=o[v[0]].d;for(var p=0,t;p<s.length;p++){v[1]=s[p].k;t=s[p].d;if(s[p].t=="target"){var m=[];for(var l=0;l<t.length;l++){m=m.concat(t[l].d);}t=m;}for(var l=0,r;l<t.length;l++){v[2]=t[l].i;r=t[l];q.ids[t[l].i]=r;q.path[v.join(",")]=r;}}}q.areas=u;this.tindex=q;},draw:function(){this.dom=$(this.config.structs.panel);this.holder=$("<div></div>");this.holder.append(this.dom);this.parentMap={filters:0,"more-filters":0};for(var j=0;j<this.data.c.length;j++){this.drawItem(this.data.c[j]);}this.holder=$(".js-filter-container");this.holder.append(this.dom).append(this.drawMoreSwitch());},drawMoreSwitch:function(){return $(this.config.structs["more-switch"]);},drawItem:function(o){var k={model:"common",parent:"more-filters",name:o.n,link:function(i){if(o.p){var q={};q[o.p]=i.i;return f.getLink(q);}}};var n="drawOther";var m=["destfull"],j=[];for(var l=0;l<this.data.c.length;l++){if(this.data.c[l].t=="target"||this.data.c[l].t=="category"||!this.data.c[l].p){continue;}j.push(this.data.c[l].p);m.push(this.data.c[l].p);}switch(o.t){case"target":k.model="target";k.parent="filters";k.link=function(i){return function(q){if(i.p){var r={};r[i.p]=q.i;return f.getLink(r,m);if(parseInt(q.c)){return f.getLink(r,m);}else{return h;}}return h;};}(o);n="drawTarget";break;case"category":k.model="common-num";k.parent="filters";k.link=function(i){return function(q){if(i.p){var r={};r[i.p]=q.i;return f.getLink(r,j);if(parseInt(q.c)){return f.getLink(r,j);}else{return h;}}return h;};}(o);break;case"equipcate":n="parseEquip";k.parent="filters";k.model="common-num";break;case"near":k.parent="filters";k.model="common-num";break;default:}this.parentMap[k.parent]++;return this[n](this.data.d[o.k],k);},parseEquip:function(l,j){for(var k=0;k<l.d.length;k++){if(!l.d[k].c){l.d.splice(k,1);k--;}}this.drawOther(l,j).addClass("box_auto").find("dl").addClass("li_auto");},drawTarget:function(q,l){this.indexTargetData(q);var w=false,v=this.config.keys.cityid,y="_link";var x=$(this.config.structs[l.model].replace(/\{filter-name\}/g,l.name).replace(/href/g,y));var B=["",""],A=this.tindex.areas;for(var n=0,t;n<A.length;n++){B[0]=A[n];if(!q[B[0]]){this.find(B[0],x).remove();continue;}t=q[B[0]];B[1]="item";var w=this.find(B.join("."),x)[0];if(w){var s="<"+w.tagName.toLowerCase()+' class="'+w.className+'">'+decodeURI(w.innerHTML).toLowerCase()+"</"+w.tagName.toLowerCase()+">";var u="";for(var o=0;o<t.s.length;o++){var z=this.tindex.get(t.s[o]);if(!z){continue;}u+=s.replace(/\{name\}/g,z.n).replace(/\{id\}/g,z.i).replace(/\{contain\}/g,z.c).replace(/_link/g,"href").replace(/\{link\}/g,l.link(z));}$(w).replaceWith($(u));}B[1]="picker";w=this.find(B.join("."),x)[0];var r=false;if(w){r=new a(t.d,{isLink:true,showNum:true,handle:function(i){return function(p,j){if(l.link(p)==h){return h;}return l.link(p)+"&destfull="+i+","+j+",";};}(B[0])});$(w).append($(r.dom).addClass("cf"));}B[1]="switch";w=this.find(B.join("."),x)[0];if(w&&r){$(w).click((function(p,i,j){if(p.hasClass(p.attr("js-active-class"))){i.removeClass(i.attr("js-unactive-class"));}else{i.addClass(i.attr("js-unactive-class"));}i.bind("show-picker",function(){p.addClass(p.attr("js-active-class"));i.removeClass(i.attr("js-unactive-class"));});i.bind("change-tab",function(D,C){j.change(C);});return function(){if(p.hasClass(p.attr("js-active-class"))){p.removeClass(p.attr("js-active-class"));i.addClass(i.attr("js-unactive-class"));}else{p.addClass(p.attr("js-active-class"));i.removeClass(i.attr("js-unactive-class"));}};})($(w),$(r.dom).parent(),r));}}if(q.c&&this.tindex.get(q.c)){var k="shortcut",m;if(q.c.toString().split(",").length>1){m=q.c.toString().split(",")[0];k=m+".picker";}k=this.find(k,x);var B="["+v+"='"+this.tindex.get(q.c).i+"']";k.find(B).parent().addClass("on");this.find(m+".picker",x).trigger("show-picker").trigger("change-tab",[q.c.toString().split(",")[1]]);}x.find("["+b.cityname+"='国内全部'],["+b.cityname+"='出境全部']").parent().addClass("dt");this.find(l.parent).append(x);},drawOther:function(n,j){if(!n||!n.d||!n.d.length){this.parentMap[j.parent]--;return;}var r=false,p=this.config.keys.dataid,t="_link";var s=$(this.config.structs[j.model].replace(/\{filter-name\}/g,j.name).replace(/href/g,t));r=this.find("item",s)[0];var m="<"+r.tagName.toLowerCase()+' class="'+r.className+'">'+decodeURI(r.innerHTML)+"</"+r.tagName.toLowerCase()+">";var l="<"+r.tagName.toLowerCase()+' class="hots '+r.className+'">'+decodeURI(r.innerHTML)+"</"+r.tagName.toLowerCase()+">";var o="";for(var k=0,q=m;k<n.d.length;k++){if(n.d[k].h){q=l;}else{q=m;}o+=q.replace(/\{name\}/g,n.d[k].n).replace(/\{id\}/g,n.d[k].i).replace(/\{contain\}/g,n.d[k].c).replace(/_link/g,"href").replace(/\{link\}/g,j.link(n.d[k]));}$(r).replaceWith($(o));if(n.c){s.find("["+p+"='"+n.c+"']").parent().addClass("on");}this.find(j.parent).append(s);return s;},find:function(l,k){if(l instanceof Array){for(var j=0;j<l.length;j++){l[j]="[js-place-holder='"+l[j]+"']";}}else{return this.find([l],k);}return(k?k:this.holder).find(l.join(","));},bindEvents:function(){if(this.parentMap["more-filters"]){var k=this.find(["more-filters"]);k.children().first().find(".li").addClass("bd_none");if(this.data.o){k.removeClass(k.attr("js-close-class"));}else{k.addClass(k.attr("js-close-class"));}var i=this.find("openfilters");var j=X.Cookie.get("QN37")?parseInt(X.Cookie.get("QN37")):true;i.click(function(){var l=function(){if(j){$(this).html($(this).attr("js-active-text"));$(this).addClass($(this).attr("js-unactive-class"));k.removeClass(k.attr("js-close-class"));}else{$(this).html($(this).attr("js-unactive-text"));$(this).removeClass($(this).attr("js-unactive-class"));k.addClass(k.attr("js-close-class"));}};l.call(i[0]);return function(){j=!j;X.Cookie.set("QN37",(j?1:0),24*3600*1000,"/",window.location.host.toString());l.call(this);};}());}else{this.find(["more-filters","openfilters"]).remove();}}};var g={load:function(l){var o=$("[js-place-holder='local']"),s=$("[js-place-holder='local-parent']");var i=new a(l.d,{isLink:true,showNum:false,handle:function(v){var u=e.params||{};var t=[];for(var w in u){t.push(w);}return f.getLink({ename:v.i},t);}});$("[js-place-holder='js-local-picker']").replaceWith(i.dom);var r=false,n=false;var q=$(document);var j=function(t){if(n){return;}q.bind("click",m);n=true;};var k=function(t){q.unbind("click",m);n=false;};i.dom.bind("mouseenter",k);i.dom.bind("mouseleave",j);var m=function(t){s.removeClass(s.attr("js-active-class"));r=false;t.stopPropagation();k();};var p=function(t){s.addClass(s.attr("js-active-class"));r=true;t.stopPropagation();j();};o.parent().click(function(t){if(r){m(t);}else{p(t);}});}};var a=function(j,i){this.data=j;$.extend(this.opts={},i);this.pack=[];this.draw();this.bindEvents();};a.prototype={draw:function(){var i='<div class="tabs_box" js-place-holder="areapicker"><div class="tabs js_tabs"></div></div>';this.dom=$($(i)[0]);this.drawTabs();this.drawPacks();this.change(0);},drawTabs:function(){var k="<ul>";for(var j=0;j<this.data.length;j++){k+='<li js-pack-data="'+j+'">'+this.data[j].k+"</li>";}k+="</ul>";this.tabs=$($(k)[0]);this.dom.children("div.js_tabs").append(this.tabs);},drawPacks:function(){for(var j=0;j<this.data.length;j++){if(!this.data[j].t){this.data[j].t="normal";}this.pack.push(this._drawPack({data:this.data[j].d,id:j,key:this.data[j].k,type:this.data[j].t}));this.dom.append(this.pack[j]);}},_drawPack:function(j){var i="drawNormal";switch(j.type){case"target":i="drawTarget";break;}return this[i](j);},drawTarget:function(s){var m=s.id,p=s.key;var v=[];for(var q=0;q<s.data.length;q++){var l=s.data[q].k,u=s.data[q].d;if(!u.length){continue;}v.push('<dl class="tabs_ct1 cf tabs_target" js-citylist="'+m+'">');v.push("<dt>"+l+"</dt>");v.push("<dd>");if(u[0].s){var t={},o=[];for(var r=0;r<u.length;r++){var w=u[r].s.toUpperCase();if(!t[w]){t[w]=[];o.push(w);}t[w].push(u[r]);}o.sort();for(var p=0;p<o.length;p++){var w=o[p];v.push('<ul class="clear1"><li class="first"><b>'+w+"</b></li>");for(var r=0;r<t[w].length;r++){var x=t[w][r];var n=x.n;if(this.opts.showNum&&"c" in x){n+="("+x.c+")";}if(this.opts.isLink){v.push('<li><a href="'+this.opts.handle(x,p)+'" '+f.keys.cityid+'="'+x.i+'" '+f.keys.cityname+'="'+x.n+'">'+n+"</a></li>");}else{v.push('<li><a href="javascript:void(0)" '+f.keys.cityid+'="'+x.i+'" '+f.keys.cityname+'="'+x.n+'">'+n+"</a></li>");}}v.push("</ul>");}}else{v.push('<ul class="clear1 tab-hot" style="margin-left: -16px">');for(var r=0;r<u.length;r++){var x=u[r];var n=x.n;if(this.opts.showNum&&"c" in x){n+="("+x.c+")";}if(this.opts.isLink){v.push('<li><a href="'+this.opts.handle(x,p)+'" '+f.keys.cityid+'="'+x.i+'" '+f.keys.cityname+'="'+x.n+'">'+n+"</a></li>");}else{v.push('<li><a href="javascript:void(0)" '+f.keys.cityid+'="'+x.i+'" '+f.keys.cityname+'="'+x.n+'">'+n+"</a></li>");}}v.push("</ul>");}v.push("</dd>");v.push("</dl>");}return $(v.join(""));},drawNormal:function(n){var p=n.data,q=n.id,l=n.key;var o='<ul class="tabs_ct" js-citylist="'+q+'">';for(var m=0;m<p.length;m++){var j=p[m].n;if(this.opts.showNum&&"c" in p[m]){j+="("+p[m].c+")";}if(this.opts.isLink){o+='<li><a href="'+this.opts.handle(p[m],l)+'" '+f.keys.cityid+'="'+p[m].i+'" '+f.keys.cityname+'="'+p[m].n+'">'+j+"</a></li>";}else{o+='<li><a href="javascript:void(0)" '+f.keys.cityid+'="'+p[m].i+'" '+f.keys.cityname+'="'+p[m].n+'">'+j+"</a></li>";}}o+="</ul>";return $(o)[0];},change:function(l){if(typeof l=="string"){for(var k=0;k<this.data.length;k++){if(l==this.data[k].k){l=k;break;}}if(l!=k){return;}}this.tabs.children("li").removeClass("on");$(this.tabs.children("li")[l]).addClass("on");this.dom.children("[js-citylist]").hide();$(this.pack[l]).show();},bindEvents:function(){var j=this;this.tabs.children("li").click(function(i){j.change(parseInt($(this).attr("js-pack-data")));});this.tabs.children("li").mousedown(function(i){i.preventDefault();});if(!this.opts.isLink&&this.opts.handle){for(var k=0;k<this.pack.length;k++){$(this.pack[k]).find("a").click(function(i){j.opts.handle({id:$(this).attr(f.keys.cityid),name:$(this).attr(f.keys.cityname)});});}}}};var d=function(){var j=$("#qsearch");if(!j.length){return;}var i="http://tuan.qunar.com/api/suggest";var k=function(n){j.val($(".q-suggest").find("tr.active").find(".key_word").html());return;};try{j.qsuggest({ajax:{url:i+"?spellcheck.q=*&spellcheck=true&spellcheck.collate=true&spellcheck.freq=true&spellcheck.dictionary=file&spellcheck.count=10&indent=on&wt=json&json.wrf=?",dataType:"jsonp",cache:false,timeout:5000,error:function(){return;}},render:function(n){return n;},reader:function(n){try{result=[];if(!n.spellcheck["suggestions"].length>=2){return;}else{n=n.spellcheck["suggestions"][1]["suggestion"];for(var o=0,p=n.length;o<p;++o){result.push('<span class="fR">约'+n[o].freq+'条</span><span class="key_word">'+n[o].name+"</span>");}return result;}}catch(n){return false;}},on:{"q-suggest-user-action":k},width:"315px",delay:200,rdelay:5000});}catch(l){return false;}var m="输入关键字搜索团购";$("#qsearch").focus(function(){var n=$(this);if(n.val()==m){n.val("");}}).blur(function(){var n=$(this);if(n.val()==""){n.val(m);}});$("#qsearch_form").submit(function(n){return($("#qsearch").val()!=m&&$.trim($("#qsearch").val())!="");});j.focus(function(){j.parent().parent().addClass("search_on");});j.blur(function(){j.parent().parent().removeClass("search_on");});};$(function(){e=QNR.NAV||{};e.areas=QNR.LOCAL||e.areas;if(e.filters){c.load(e.filters,e.filters||{});}if(e.areas){g.load(e.areas);d();}e.link=e.link||window.location.pathname;});})();(function(a){if(!a){a=window.QNR={};}a.FloatMath={pow:function(c,b){if(b>=0){return Math.pow(c,b);}else{return a.FloatMath.div(1,Math.pow(c,Math.abs(b)));}},add:function(g,f){var d,c,b;try{d=g.toString().split(".")[1].length;}catch(h){d=0;}try{c=f.toString().split(".")[1].length;}catch(h){c=0;}b=Math.pow(10,Math.max(d,c));return(a.FloatMath.mul(g,b)+a.FloatMath.mul(f,b))/b;},sbt:function(c,b){return a.FloatMath.add(c,-b);},mul:function(f,c){var b=0,g=f.toString(),d=c.toString();try{b+=g.split(".")[1].length;}catch(h){}try{b+=d.split(".")[1].length;}catch(h){}return Number(g.replace(".",""))*Number(d.replace(".",""))/Math.pow(10,b);},div:function(c,b){return a.FloatMath.mul(c,1/b);}};}(window.QNR));(function(){var d={$MERGE:function(f,g){for(var e in g){if(g[e]){f[e]=g[e];}}return f;},$GET:function(e){return document.getElementById(e);},$EACH:function(e,f){e=e||[];for(var g=0;g<e.length;g++){f(e[g],g);}},$JSONP:function(h,l,m){var e="__jsonp"+(Math.floor(Math.random()*100000));window[e]=function(){var k=Array.prototype.slice.call(arguments,0);m.apply(null,k);};var g=h+"?callback="+e;for(var f in l){if(l.hasOwnProperty(f)){g+="&"+f+"="+encodeURIComponent(l[f]);}}var j=document.createElement("script");j.src=g;var i=document.getElementsByTagName("head");if(i&&i[0]){i[0].appendChild(j);}},$QS:function(h,g){var f=g||window.location.search;var e=new RegExp(""+h+"=([^&?]*)","ig");return((f.match(e))?(f.match(e)[0].substr(h.length+1)):"");},$HS:function(h,g){var f=g||window.location.hash;var e=new RegExp(""+h+"=([^&?]*)","ig");return((f.match(e))?(f.match(e)[0].substr(h.length+1)):"");}};function b(){this.__init();}b.prototype.__init=function(){this.id="ad_"+(Math.floor(Math.random()*10000000));this.opts={};this.params={};this.is_loaded=false;this.__events={};this._addEvent("loaded",function(){this.is_loaded=true;});};b.prototype._addEvent=function(e,f){this.__events[e]=this.__events[e]||[];this.__events[e].push(f);};b.prototype._fireEvent=function(g){var e=this.__events[g]||[];for(var f=0;f<e.length;f++){e[f].call(this);}};b.prototype._load=function(){var e=this;setTimeout(function(){e._load_ad_content();},e.delay());};b.prototype.load=function(){if(this.is_loaded){return;}if(this.has_depend()){this._addEvent("other_loaded",function(e){if(this.is_depend(e)){this._load();}});}else{this._load();}};b.prototype._init=function(){};b.prototype._load_ad_content=function(){};b.prototype.delay=function(){return 0;};b.prototype.has_depend=function(){return false;};b.prototype.is_depend=function(e){};b.detect=function(e){};function a(){this.__init();}a.prototype=d.$MERGE({},b.prototype);a.prototype._load_ad_content=function(){var e=this.iframe;e.src=[this.opts.adm_html_path,"?v=",this.opts.adm_html_version,"#","id=",this.id].join("");};a.detect=function(l){var k=[];var h=document.getElementsByTagName("iframe");for(var f=0;f<h.length;f++){var e=h[f];if(a._test_iframe(e)){var g=new a();g._set_iframe(e);d.$MERGE(g.opts,{adm_html_path:"/site/adframe/adm_banner.html",adm_html_version:"1.0"});var j=l?l.opts:{};d.$MERGE(g.opts,j);k.push(g);}}return k;};a._test_iframe=function(e){if(!e){return false;}if((e.getAttribute("src")||"")!==""){return false;}if(e.getAttribute("data-ad-type")!="qad"){return false;}if(!e.id){return false;}return true;};a.prototype._set_iframe=function(f){var e=this;e.iframe=f;d.$EACH(["adfrom","adto","adcon","vataposition","tag","rows","cur_page_num","rep","f"],function(h){var g=f.getAttribute("data-"+h);if(g){e.params[h]=g;}});};a.prototype.is_debug_mode=function(){return window.location.toString().indexOf("adtest=beta")>0;};a.prototype.renderHTML=function(g){var e=this;var f="";if(e.is_debug_mode()){f="http://l-indx3.s.cn5.qunar.com/vataplan";}else{f="http://a.qunar.com/vataplan";}d.$JSONP(f,e.params,function(h){e.showCount=h.key_data.length?h.key_data.length:0;g(e._renderHTML(h),h);e._fireEvent("loaded");});};a.prototype._renderHTML=function(h){var f=this;var g=[];var e=(h.key_data&&h.key_data.length!==null)?h.key_data:[];d.$EACH(e,function(i){var j="";if(i.img){j=f._renderHTML_ImageType(i);}else{j=f._renderHTML_TextType(i);}g.push(j);});return g.join("");};a.prototype._renderHTML_ImageType=function(f){var e=this.parse_clk_url(f);return['<div class="un_ct">','    <dl class="hn_dl">','        <dt><a target="_blank" href="',e,'"><img src="',f.img||"",'"></a></dt>','        <dd><a target="_blank" href="',e,'" class="hn_d2">',f.title||"","</a></dd>",'        <dd><a target="_blank" href="',e,'" class="hn_d3">',f.description||"","</a></dd>",'        <dd><a target="_blank" href="',e,'">',f.show||"","</a></dd>","    </dl>",'    <div class="clr"></div>',"</div>"].join("");};a.prototype._renderHTML_TextType=function(f){var e=this.parse_clk_url(f);return['<div class="un_ct">','    <dl class="un_dl">','        <dt><a target="_blank" href="',e,'" class="hn_d2">',f.title||"","</a></dt>",'        <dd><a target="_blank" href="',e,'" class="aa">',f.description||"","</a></dd>",'        <dd><a target="_blank" href="',e,'">',f.show||"","</a></dd>","    </dl>","</div>"].join("");};a.prototype.parse_clk_url=function(e){return["http://clk.qunar.com/q?k=",e.s||"","&e=",e.e].join("");};a.prototype.showFH=function(){var e=this;if(!e.iframe){return;}if(e.iframe.clientHeight<30){return;}var h=e.iframe.id;var f=d.$GET(h+"_title");var g=d.$GET(h+"_footer");if(f){f.style.display="block";}if(g){g.style.display="block";}if(e.iframe.getAttribute("marginbottom")){e.iframe.style.marginBottom=e.iframe.getAttribute("marginbottom")+"px";}if(e.iframe.getAttribute("margintop")){e.iframe.style.marginBottom=e.iframe.getAttribute("margintop")+"px";}};a.prototype.fitHeight=function(e){var f=this;if(!f.iframe){return;}if(e<30){return;}f.iframe.style.height=e+"px";f.iframe.height=e;};function c(){this.ads=[];}c.prototype._init=function(){var g=["other_loaded","loaded","success","error"];var h=function(i){return function(j){this.each(function(){this.__events[i]=[];});if(j&&typeof j=="function"){this.each((function(k,l){return function(){this._addEvent(k,l);};})(i,j));}else{this.each(function(){this._fireEvent(i);});}return this;};};for(var f=0;f<g.length;f++){var e=g[f];c.fn[e]=h(e);}d.$MERGE(this.ads,c.fn);};c.prototype.init=function(){this._init();this._detect();this._bind_for_depend();return this.ads;};c.prototype._detect=function(){var g=c.AD_TYPES();for(var f=0;f<g.length;f++){var k=g[f];var h=k.detect(this);for(var e=0;e<h.length;e++){this.ads.push(h[e]);}}};c.prototype._bind_for_depend=function(){var e=this;this.ads.loaded(function(){e.ads.other_loaded(this);});};c.prototype.find=function(f,e){this.ads.each(function(){if(f.indexOf("#")==0){if(this.iframe.id==f.replace("#","")){e.call(this,this);}}else{if(this.id==f){e.call(this,this);}}});};c.AD_TYPES=function(){return[a];};c.fn={set_params:function(e){this.each(function(){d.$MERGE(this.params,e);});return this;},load:function(){this.each(function(){this.load();});return this;},set_options:function(e){this.each(function(){d.$MERGE(this.opts,e);});return this;},each:function(f){for(var e=0;e<this.length;e++){f.call(this[e],e);}return this;},filter:function(f){var g=[];this.each(function(h){if(f.call(h,h)){g.push(h);}});this.splice(0,this.length);for(var e=0;e<g.length;e++){this.push(g[e]);}return this;}};if(typeof window!="undefined"){window.$ADM=new c();window.$ADM.Util=d;}})();(function(e){var b=(function(){var m="data-detect-oninput",j={},l={},n=1,o=1;var p=function(s,u,t,r){if(s.addEventListener){s.addEventListener(u,t,false);}else{if(s.attachEvent){s.attachEvent("on"+u,t);}}(j[r]||(j[r]=[])).push({t:u,h:t});};var q=function(u,r){if(!j[r]){return;}for(var t=0,s;s=j[r][t];t++){if(u.removeEventListener){u.removeEventListener(s.t,s.h,false);}else{if(u.detachEvent){u.detachEvent("on"+s.t,s.h);}}}delete j[r];};var k=function(t,u){var s=t.value;var r=function(){var v;if((v=t.value)!==s){if(r._sleep!==true){u.call(t,v,s);}s=t.value;}};return r;};var i=navigator.userAgent.toLowerCase();return{version:"1.3",bind:function(s,w){var t,r=w[m];if(!r){w[m]=r=n++;}if(!(t=s.getAttribute(m))){s.setAttribute(m,t=""+o++);}var u=k(s,w);if("oninput" in s&&!/opera/.test(i)){p(s,"input",u,r);}else{var v;p(s,"focus",function(){if(!v){v=setInterval(u,100);}},r);p(s,"blur",function(){if(v){clearInterval(v);v=null;}},r);}l[r]={eid:t,checker:u};return s;},unbind:function(r,s){if(s[m]){q(r,s[m]);delete l[s[m]];}return r;},set:function(s,x){var u=s.getAttribute(m);if(u){var w=[];for(var t in l){if(l[t]["eid"]===u){w.push(l[t]["checker"]);l[t]["checker"]._sleep=true;}}s.value=x;for(var v=0,r=w.length;v<r;v++){w[v].call(s);w[v]._sleep=false;}}else{s.value=x;}}};})();e.qsuggest={version:"1.2"};var d=e.qsuggest.ROOT_KEY="q-suggest";var a=0;var c={ajax:{url:null,cache:false,success:function(){}},reader:function(i){return i;},loader:function(i){return i;},max:10,min:1,container:null,delay:100,rdelay:1000,requestWithNothing:false,trimQuery:true,css:{"z-index":10000},render:function(i){return String(i).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");}};function h(i){var j=i.offset();j.top+=i.outerHeight();return j;}function g(i){return i.closest("table").data("data")[i.attr("data-ind")*1];}function f(j,i){if(!this.init){return new qsuggest(j,i);}else{return this.init(j,i);}}e.extend(f.prototype,{init:function(k,j){this.key=++a;var l=this.ns=d+this.key;j=this.args=e.extend(true,{},c,j||{});var m=this.activeEl=e(k);var i=this;this.el=e('<div class="'+d+(j.customClass?" "+j.customClass:"")+'"></div>').appendTo(j.container||document.body).hide();this.el.data(d,this);this._handler=null;this._ajaxHandler=null;this._excludeEl=null;this._mouseFocus=null;this._last=[];this._cache={};this._value=null;e.each(j.on||{},function(o,n){m.bind(o+"."+l,n);});if(j.css){this.el.css(i.args.css);}var i=this;b.bind(m[0],function(){i.show();});m.bind("keyup."+l,function(n){var u=i.visible();var o=n.keyCode;if(o===40&&!u){i.show();return;}var q=i.el.find("tr");var s=q.filter(".active");switch(o){case 38:case 40:if(u){i._excludeEl=i._mouseFocus;s.removeClass("active");var r=n.keyCode===38?s.prev():s.next();if(r.size()===0){r=q.filter(o===38?":last":":first");}var t=g(r);i.setValue(t);r.addClass("active");n.preventDefault();i._trigger("q-suggest-user-action",[n.type,t,o]);}break;case 13:case 27:if(u){i.hide();i._trigger("q-suggest-user-action",[n.type,i.getValue(),o]);}break;case 18:case 9:break;default:}});m.bind("blur."+l,function(n){if(i.visible()){i.hide();}});e("tr",this.el[0]).live("mouseover."+l+" mouseout."+l+" mousedown."+l,function(n){var p=e.nodeName(n.target,"tr")?e(n.target):e(n.target).parents("tr").eq(0);var o=p[0]!=i._excludeEl;if(n.type==="mouseover"){if(o){p.parents().children().removeClass("active");p.addClass("active");i._excludeEl=null;}i._mouseFocus=p[0];}else{if(n.type==="mouseout"){i._mouseFocus=null;}else{i.setValue(g(p));i.hide();i._trigger("q-suggest-user-action",[n.type,i.getValue(),null]);}}});return this;},req:function(){var i=this;if(i._handler){clearTimeout(i._handler);}if(i._timeoutHandler){clearTimeout(i._timeoutHandler);i._timeoutHandler=null;}if(i._ajaxHandler){i._ajaxHandler=null;}i._handler=setTimeout(function(){var k=i.activeEl.val(),p=i.args.loader(k),o=i.args.data?i.args.data:null,j;if(i.args.trimQuery){p=e.trim(p);}if(!p&&!i.args.requestWithNothing){i.draw(null);return;}if(i._last&&i._last[0]===p){i.draw(i._last[1]);return;}if(i._last&&i._last[0]==p){o=i._last;}else{if(i.args.cache&&i._cache[p]){o=i._cache[p];}}if(o){var m=i.args.reader.call(i,o);i.draw(m);}else{if(!i.args.ajax.url){i.draw(null);}else{var l=i.args.ajax.url.replace(/\*([^*]+)$/,encodeURIComponent(p)+"$1");var n=i.args.ajax.success;i._timeoutHandler=setTimeout(function(){i.hide();},i.args.rdelay);i._ajaxHandler=e.ajax(e.extend({},i.args.ajax,{url:l,success:function(s,q){clearTimeout(i._timeoutHandler);i._timeoutHandler=null;i._ajaxHandler=null;if(k!==i.activeEl.val()){return;}var r=i.args.reader.call(i,s,q);if(i.type(r)==="Array"){i.draw(r);i._last=i._cache[p]=[p,r,q];}n.apply(this,arguments);}}));}}},i.args.delay);},type:function(i){return Object.prototype.toString.call(i).slice(8,-1);},show:function(){this.req();},hide:function(){if(this.visible()){this.el.hide();this._trigger("q-suggest-hide");}},draw:function(n){this.el.empty();var k=this.args.min,j=this.args.max;if(!n||!n.length||n.length<k){this.hide();return;}var i=[],m=this.args.render;i.push('<table cellspacing="0" cellpadding="2"><tbody>');e.each(n,function(q,o){if(q>=j){return false;}i.push('<tr data-ind="',q,'"><td>',m(o),"</td></tr>");});i.push("</tbody></table>");var p=e(i.join("")).appendTo(this.el).data("data",n);if(!this.args.container){this.el.css(h(this.activeEl));}var l=this.args.width;if(!l){this.el.css("width",this.activeEl.outerWidth());}else{this.el.css("width",l);}this.el.show();this._trigger("q-suggest-show",[n]);},dispose:function(){this._trigger("q-suggest-dispose");this.activeEl.unbind("."+this.ns);e(window).unbind("."+this.ns);this.el.remove();},visible:function(){return this.el.is(":visible");},_trigger:function(){this.activeEl.triggerHandler.apply(this.activeEl,arguments);},setValue:function(i){b.set(this.activeEl[0],i);this._value=i;},getValue:function(){return this._value;},set:function(m,n){var o=false;switch(m){case"container":this.el.appendTo(n||document.body);this.el.css({top:"",left:""});break;}if(!o){for(var l=0,k=m.split("."),j=k.length,p=this.args;l<j&&(l!==j-1&&(p[k[l]]||(p[k[l]]={}))||(p[k[l]]=n));p=p[k[l]],l++){}}return n;},get:function(m){for(var l=0,n=this.args,k=m.split("."),j=k.length;l<j&&(n=n[k[l]]);l++){}return n;}});e.fn.qsuggest=function(){var i=arguments;if(arguments.length>1&&this.data(d)){var j=null;if(arguments[0]==="option"||arguments[0]==="setting"){this.each(function(n,m){var l=e(m);var k=this.data(d);if(k){j=j||(i.length>2?k.set(i[1],i[2]):k.get(i[1]));}});}return j;}else{if(arguments.length<=1){this.each(function(n,m){var l=e(m);if(l.data(d)){l.data(d).dispose();l.removeData(d);}var k=new f(m,i[0]);l.data(d,k);});}}return this;};})(jQuery);