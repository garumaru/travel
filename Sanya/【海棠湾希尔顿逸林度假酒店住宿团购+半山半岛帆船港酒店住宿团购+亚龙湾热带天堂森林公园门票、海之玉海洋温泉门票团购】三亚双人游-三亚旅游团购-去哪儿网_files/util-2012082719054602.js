(function(){var a=function(){var b=$("[js-place-holder='cart-icon']"),h=b.parent(),f=$("[js-place-holder='cart-icon'] b,.js_shop_totalnum"),c=$("[js-place-holder='cart-list']"),e="/ajax/cart.php?act=display",d=null,g=false;return{init:function(){this.showNum();this.initHover();this.initDel();},showNum:function(j){if(j){f.html(j.info.quantity);return;}var i="/ajax/cart.php?act=sum";$.ajax({type:"GET",url:i,dataType:"json",success:function(k){f.html(k.info.quantity);},error:function(){X.error("总件数网络请求失败！");}});},showList:function(){h.addClass(h.attr("js-active-class"));c.show();g=true;},hideList:function(){h.removeClass(h.attr("js-active-class"));c.hide();g=false;},displayList:function(){setTimeout(function(){a.hideList();h.mouseleave(function(){a.hideList();});},100);},initHover:function(){h.hover(function(){if(!g){a.showNum();c.load(e);a.showList();}},function(){a.hideList();});},initDel:function(){c.delegate(".js_shop_del","click",function(i){h.unbind("mouseleave");i.preventDefault();if(confirm("确定要删除吗？")){var k=$(this),j=k.attr("team_id");$.ajax({type:"POST",url:"/ajax/cart.php?act=del",data:"team_id="+j,dataType:"json",success:function(l){a.showNum(l);a.displayList();},error:function(){a.displayList();alert(arguments[1]+"删除接口网络请求失败！");}});}else{a.displayList();}});}};}();if(!QNR){window.QNR={};}QNR.idx_shop=a;$(function(){a.init();});})();(function(a){a.fn.outerHTML=function(b){return(b)?this.before(b).remove():a("<div></div>").append(this.eq(0).clone()).html();};})(jQuery);$(function(){$("#mail_take").click(function(){X.boxShow($("#mail_fc").outerHTML());$("#js-subscribe-sub").click(function(b){var c=$("#js-subscribe-email").val();var a=/^\w+([-+.]\w+)*@\w+([-.]\\w+)*\.\w+([-.]\w+)*$/;if(!a.test(c)){b.preventDefault();}});$("#mail_fc").find(".pop_close").click(function(){X.boxClose();});});});